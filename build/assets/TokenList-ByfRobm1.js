import{j as r}from"./web3-vendor-BrCblzDw.js";import{r as n,L as z,u as B}from"./react-vendor-BTPJ9MfQ.js";import{c as S,d as $,S as q}from"./Layout-v-AdNPFX.js";import{f as D}from"./tokens-B86zubp0.js";import{d as M}from"./index-CEFNVjTf.js";import{G as F,T as R,M as k,Y as A}from"./youtube-uWYICnfW.js";function G({title:e,titleId:s,...t},d){return n.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:d,"aria-labelledby":s},t),e?n.createElement("title",{id:s},e):null,n.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M15.75 19.5 8.25 12l7.5-7.5"}))}const V=n.forwardRef(G);function W({title:e,titleId:s,...t},d){return n.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:d,"aria-labelledby":s},t),e?n.createElement("title",{id:s},e):null,n.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"m8.25 4.5 7.5 7.5-7.5 7.5"}))}const O=n.forwardRef(W);/**
 * @license lucide-react v0.407.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const X=S("Clock",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["polyline",{points:"12 6 12 12 16 14",key:"68esgv"}]]),I=new Map,y=new Map,T=e=>{if(!e)return!1;const s=[".mp4",".mov",".webm",".ogg",".avi"],t=e.toLowerCase();return s.some(d=>t.includes(d))||t.includes("/video/")||t.includes("resource_type=video")},Y=({token:e,isEnded:s,onTokenClick:t,onLiquidityUpdate:d})=>{var m,E;const[j,x]=n.useState("0"),[b,u]=n.useState(!1);if(!(e!=null&&e.address))return console.error("TokenCard: token.address is missing",e),r.jsx("div",{className:"bg-[var(--card)] rounded-lg p-4 border border-yellow-500/50",children:r.jsx("p",{className:"text-yellow-400 text-sm",children:"Invalid token data"})});if(typeof e.address!="string"||!e.address.startsWith("0x")||e.address.length!==42)return console.error("TokenCard: invalid token address format",e.address),r.jsx("div",{className:"bg-[var(--card)] rounded-lg p-4 border border-yellow-500/50",children:r.jsx("p",{className:"text-yellow-400 text-sm",children:"Invalid token address"})});const p=e.address,N=!((m=e._count)!=null&&m.liquidityEvents),h=e.chainId;n.useEffect(()=>{if(e.graduationProgress&&e.graduationProgress!=="0"&&e.graduationProgress!==void 0){x(e.graduationProgress),d&&d(BigInt(e.graduationProgress));return}if(!N||!p||!h||b)return;const a=`${p.toLowerCase()}-${h}`,l=y.get(a);if(l){x(l.graduationProgress),d&&d(BigInt(l.graduationProgress));return}const f=I.get(a);if(f){u(!0),f.then(c=>{x(c.graduationProgress),d&&d(BigInt(c.graduationProgress)),y.set(a,c),setTimeout(()=>{y.delete(a)},3e4)}).catch(c=>{console.error("Error fetching graduation progress:",c)}).finally(()=>{u(!1)});return}(async()=>{u(!0);try{const c=D(p,h);I.set(a,c);const _=await c;x(_.graduationProgress),d&&d(BigInt(_.graduationProgress)),y.set(a,_),I.delete(a),setTimeout(()=>{y.delete(a)},3e4)}catch(c){console.error("Error fetching graduation progress:",c),I.delete(a)}finally{u(!1)}})()},[N,p,h,e.graduationProgress]);const g=a=>{var l;try{if(((l=e._count)==null?void 0:l.liquidityEvents)>0)return 100;if(!a||a==="0")return 0;const L=Number(a)/1e18*100;return Math.min(Math.max(L,0),100)}catch(f){return console.error("Error calculating progress:",f),0}},P=g(j),w=((E=e._count)==null?void 0:E.liquidityEvents)>0,C=j,v=e.chainId?M[e.chainId]:null,o=()=>r.jsxs("div",{className:"flex items-center gap-2 absolute top-3 right-3",onClick:a=>a.stopPropagation(),children:[e.website&&r.jsx("a",{href:e.website,target:"_blank",rel:"noopener noreferrer",className:"p-1.5 rounded-lg text-[var(--text-secondary)] hover:text-[var(--primary)] hover:bg-[var(--card-hover)] border border-transparent hover:border-[var(--primary)] transition-all duration-300",children:r.jsx(F,{size:14})}),e.twitter&&r.jsx("a",{href:e.twitter,target:"_blank",rel:"noopener noreferrer",className:"p-1.5 rounded-lg text-[var(--text-secondary)] hover:text-[var(--primary)] hover:bg-[var(--card-hover)] border border-transparent hover:border-[var(--primary)] transition-all duration-300",onClick:a=>a.stopPropagation(),children:r.jsx(R,{size:14})}),e.telegram&&r.jsx("a",{href:e.telegram,target:"_blank",rel:"noopener noreferrer",className:"p-1.5 rounded-lg text-[var(--text-secondary)] hover:text-[var(--primary)] hover:bg-[var(--card-hover)] border border-transparent hover:border-[var(--primary)] transition-all duration-300",onClick:a=>a.stopPropagation(),children:r.jsx(q,{size:14})}),e.discord&&r.jsx("a",{href:e.discord,target:"_blank",rel:"noopener noreferrer",className:"p-1.5 rounded-lg text-[var(--text-secondary)] hover:text-[var(--primary)] hover:bg-[var(--card-hover)] border border-transparent hover:border-[var(--primary)] transition-all duration-300",onClick:a=>a.stopPropagation(),children:r.jsx(k,{size:14})}),e.youtube&&r.jsx("a",{href:e.youtube,target:"_blank",rel:"noopener noreferrer",className:"p-1.5 rounded-lg text-[var(--text-secondary)] hover:text-[var(--primary)] hover:bg-[var(--card-hover)] border border-transparent hover:border-[var(--primary)] transition-all duration-300",onClick:a=>a.stopPropagation(),children:r.jsx(A,{size:14})})]}),i=()=>{t(e.address,e.chainId)};if(s&&"liquidityEvents"in e&&e.liquidityEvents.length>0){const a=`https://app.uniswap.org/swap?outputCurrency=${e.address}&chain=mainnet`;return r.jsx("div",{onClick:i,className:"cursor-pointer group",children:r.jsxs("div",{className:"card relative overflow-hidden border-[var(--card-boarder)] hover:border-[var(--primary)]",children:[r.jsx("div",{className:"absolute top-0 left-0 right-0 h-0.5 bg-gradient-to-r from-transparent via-[var(--primary)] to-transparent opacity-0 group-hover:opacity-100 transition-opacity duration-300"}),v&&r.jsx("div",{className:"absolute top-3 left-3 p-1.5 rounded-lg bg-[var(--card2)]/80 backdrop-blur-sm border border-[var(--card-boarder)] z-10",onClick:l=>l.stopPropagation(),children:r.jsx(v,{size:18,className:"rounded-full",variant:"branded"})}),r.jsxs("div",{className:"p-4 md:p-5",children:[r.jsxs("div",{className:"flex gap-3 md:gap-4 mb-4",children:[r.jsx("div",{className:"w-16 h-16 md:w-20 md:h-20 flex-shrink-0 rounded-lg overflow-hidden border border-[var(--card-boarder)] group-hover:border-[var(--primary)] transition-all duration-300",children:T(e.logo)?r.jsx("video",{src:e.logo,className:"w-full h-full object-cover",muted:!0,loop:!0,playsInline:!0,autoPlay:!0}):r.jsx("img",{src:e.logo||"/chats/noimg.svg",alt:e.name,className:"w-full h-full object-cover"})}),r.jsxs("div",{className:"flex-grow min-w-0",children:[r.jsxs("h3",{className:"text-base md:text-lg font-bold text-white mb-1 truncate",children:[e.name," ",r.jsx("span",{className:"text-[var(--text-secondary)] font-normal",children:e.symbol})]}),r.jsx("p",{className:"text-xs md:text-sm text-[var(--text-secondary)] line-clamp-2",children:e.description})]})]}),r.jsxs("div",{className:"space-y-3 mb-4",children:[r.jsxs("div",{className:"flex justify-between text-xs md:text-sm mb-1",children:[r.jsx("span",{className:"text-[var(--text-secondary)]",children:"Progress to DEX"}),r.jsx("span",{className:"gradient-text-cyan font-semibold",children:"Completed"})]}),r.jsx("div",{className:"w-full bg-[var(--card-boarder)] rounded-full h-2 overflow-hidden",children:r.jsx("div",{className:"h-2 rounded-full transition-all duration-500 w-full bg-gradient-to-r from-[var(--primary)] to-[var(--accent-purple)] shadow-[0_0_10px_rgba(0,243,255,0.5)]"})})]}),r.jsxs("div",{className:"flex gap-2",children:[r.jsx("a",{href:a,target:"_blank",rel:"noopener noreferrer",className:"flex-1 text-center py-2.5 text-xs md:text-sm font-semibold btn-primary",onClick:l=>l.stopPropagation(),children:"Trade"}),r.jsx(z,{to:`/token/${e.chainId||1}/${e.address}`,className:"flex-1 text-center py-2.5 text-xs md:text-sm font-semibold btn-secondary",children:"View"})]})]})]})})}return r.jsx("div",{onClick:i,className:"cursor-pointer group",children:r.jsxs("div",{className:"card relative overflow-hidden border-[var(--card-boarder)] hover:border-[var(--primary)]",children:[r.jsx("div",{className:"absolute top-0 left-0 right-0 h-0.5 bg-gradient-to-r from-transparent via-[var(--primary)] to-transparent opacity-0 group-hover:opacity-100 transition-opacity duration-300"}),v&&r.jsx("div",{className:"absolute top-3 left-3 p-1.5 rounded-lg bg-[var(--card2)]/80 backdrop-blur-sm border border-[var(--card-boarder)] z-10",onClick:a=>a.stopPropagation(),children:r.jsx(v,{size:18,className:"rounded-full",variant:"branded"})}),r.jsx(o,{}),r.jsxs("div",{className:"p-4 md:p-5",children:[r.jsxs("div",{className:"flex gap-3 md:gap-4 mb-4",children:[r.jsx("div",{className:"w-16 h-16 md:w-20 md:h-20 flex-shrink-0 rounded-lg overflow-hidden border border-[var(--card-boarder)] group-hover:border-[var(--primary)] transition-all duration-300",children:T(e.logo)?r.jsx("video",{src:e.logo,className:"w-full h-full object-cover",muted:!0,loop:!0,playsInline:!0,autoPlay:!0}):r.jsx("img",{src:e.logo||"/chats/noimg.svg",alt:e.name,className:"w-full h-full object-cover"})}),r.jsxs("div",{className:"flex-grow min-w-0",children:[r.jsxs("h3",{className:"text-base md:text-lg font-bold text-white mb-1 truncate",children:[e.name," ",r.jsx("span",{className:"text-[var(--text-secondary)] font-normal",children:e.symbol})]}),r.jsx("p",{className:"text-xs md:text-sm text-[var(--text-secondary)] line-clamp-2",children:e.description})]})]}),r.jsxs("div",{className:"space-y-3",children:[r.jsxs("div",{className:"flex items-center text-xs md:text-sm text-[var(--text-secondary)]",children:[r.jsx(X,{size:14,className:"mr-2 text-[var(--primary)]"}),r.jsx("span",{children:$(e.createdAt)})]}),r.jsxs("div",{className:"space-y-2",children:[r.jsxs("div",{className:"flex justify-between text-xs md:text-sm mb-1",children:[r.jsx("span",{className:"text-[var(--text-secondary)]",children:"Progress to DEX"}),r.jsx("span",{className:`font-semibold ${w?"gradient-text-cyan":"text-white"}`,children:w?"Completed":C?`${g(C.toString()).toFixed(2)}%`:"0%"})]}),r.jsx("div",{className:"w-full bg-[var(--card-boarder)] rounded-full h-2 overflow-hidden",children:r.jsx("div",{className:"h-2 rounded-full transition-all duration-500 bg-gradient-to-r from-[var(--primary)] to-[var(--accent-purple)] shadow-[0_0_10px_rgba(0,243,255,0.5)]",style:{width:`${P}%`}})})]})]})]})]})})},K=({size:e="medium",color:s="var(--primary)"})=>{const t={small:"w-32 h-1",medium:"w-48 h-1.5",large:"w-64 h-2"};return r.jsxs("div",{className:"flex flex-col items-center justify-center gap-2",children:[r.jsx("div",{className:`${t[e]} bg-[var(--card-boarder)] rounded-full overflow-hidden`,children:r.jsx("div",{className:"h-full rounded-full animate-loading-bar",style:{backgroundColor:s,width:"30%"}})}),r.jsx("span",{className:"text-gray-400 text-xs",children:"Loading..."})]})};class H extends n.Component{constructor(s){super(s),this.state={hasError:!1,error:null,errorInfo:null}}static getDerivedStateFromError(s){return{hasError:!0,error:s,errorInfo:null}}componentDidCatch(s,t){console.error("ErrorBoundary caught an error:",s,t),this.setState({error:s,errorInfo:t})}render(){var s,t;return this.state.hasError?this.props.fallback?this.props.fallback:r.jsxs("div",{className:"bg-red-900/20 border border-red-500 rounded-lg p-4 m-4",children:[r.jsx("h2",{className:"text-red-400 font-bold mb-2",children:"Something went wrong"}),r.jsxs("details",{className:"text-red-300 text-sm",children:[r.jsx("summary",{className:"cursor-pointer mb-2",children:"Error details"}),r.jsxs("pre",{className:"whitespace-pre-wrap text-xs mt-2",children:[(s=this.state.error)==null?void 0:s.toString(),(t=this.state.errorInfo)==null?void 0:t.componentStack]})]})]}):this.props.children}}const sr=({tokens:e,currentPage:s,totalPages:t,onPageChange:d,isEnded:j,sortType:x,itemsPerPage:b,isFullList:u})=>{const p=B(),[N,h]=n.useState(!1),[g,P]=n.useState({}),w=(o,i)=>{h(!0),p(`/token/${i||1}/${o}`),h(!1)},C=(o,i)=>{P(m=>({...m,[o]:i}))},v=n.useMemo(()=>{let o=[...e];if(x==="marketcap"&&o.sort((i,m)=>{const E=g[i.address]||BigInt(0);return(g[m.address]||BigInt(0))>E?1:-1}),u){const i=(s-1)*b,m=i+b;return o.slice(i,m)}return o},[e,x,g,s,b,u]);return r.jsxs(r.Fragment,{children:[r.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4 max-w-7xl mx-auto",children:v.map(o=>r.jsx(H,{fallback:r.jsx("div",{className:"bg-[var(--card)] rounded-lg p-4 border border-red-500/50",children:r.jsxs("p",{className:"text-red-400 text-sm",children:["Error loading token: ",o.name||o.address]})}),children:r.jsx(Y,{token:o,isEnded:j,onTokenClick:w,onLiquidityUpdate:i=>C(o.address,i)})},o.id))}),N&&r.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:r.jsx(K,{size:"large"})}),t>1&&r.jsxs("div",{className:"flex justify-center items-center space-x-2 mt-8",children:[r.jsx("button",{onClick:()=>d(s-1),disabled:s===1,className:"p-2 rounded-md bg-[var(--card)] text-gray-400 hover:bg-[var(--card-hover)] disabled:opacity-50 disabled:cursor-not-allowed",children:r.jsx(V,{className:"h-5 w-5"})}),r.jsx("div",{className:"flex items-center space-x-1",children:Array.from({length:t},(o,i)=>i+1).map(o=>r.jsx("button",{onClick:()=>d(o),className:`px-3 py-1 rounded-md text-sm transition-colors duration-200 ${s===o?"bg-[var(--primary)] text-black":"bg-[var(--card)] text-gray-400 hover:bg-[var(--card-hover)]"}`,children:o},o))}),r.jsx("button",{onClick:()=>d(s+1),disabled:s===t,className:"p-2 rounded-md bg-[var(--card)] text-gray-400 hover:bg-[var(--card-hover)] disabled:opacity-50 disabled:cursor-not-allowed",children:r.jsx(O,{className:"h-5 w-5"})})]})]})};export{K as L,sr as T};
