import{u as we,c as ot,j as t,b as je,d as it,e as lt,f as ct,g as dt,m as ut,h as Ae,p as ht}from"./web3-vendor-egKqMAPl.js";import{r as d,u as mt,e as ft}from"./react-vendor-BTPJ9MfQ.js";import{s as gt,i as Be,f as de,j as xt,k as pt,L as vt,b as xe,a as bt,S as yt}from"./Layout-CRt7ORc3.js";import{e as wt,u as jt,w as Nt,g as Ct,a as Tt,b as Et,h as Pt,i as Lt,j as At,c as Bt,f as _t}from"./api-Y8mGTqrB.js";import{B as b,u as Se,g as Re,c as ke,b as St}from"./index-BncCMxvF.js";import{S as Rt}from"./SEO-B8zD07Wz.js";import{L as le,T as kt}from"./TokenList-hcEvDfNj.js";import{F as Mt}from"./CloudArrowUpIcon-DE7L2IEJ.js";import{u as It}from"./useEmbeddedWallet-DFSbAsOt.js";import{E as Dt}from"./external-link-uVqZpurb.js";import{G as Ot,T as $t,M as Ut,Y as Ft}from"./youtube-BcmrLJMd.js";import{F as zt,a as Ht}from"./ChevronRightIcon-8oQClXOB.js";const Wt=({onAuthSuccess:e})=>{const{address:r}=we(),{signMessageAsync:a}=ot(),[s,n]=d.useState(!1),o=async()=>{try{n(!0);const u=await fetch("/api/auth/nonce"),{nonce:l}=await u.json(),i=new gt.SiweMessage({domain:window.location.host,address:r,statement:"Sign in to post a message",uri:window.location.origin,version:"1",chainId:"84532",nonce:l}),h=i.prepareMessage(),m=await a({message:h});if(!(await fetch("/api/auth/verify",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({message:i,signature:m})})).ok)throw new Error("Error verifying message");e(),b.success("Successfully signed in!",{position:"top-right",hideProgressBar:!1,closeOnClick:!0,pauseOnHover:!0,draggable:!0})}catch{b.error("Failed to sign. try again.",{position:"top-right",hideProgressBar:!1,closeOnClick:!0,pauseOnHover:!0,draggable:!0})}finally{n(!1)}};return r?t.jsx("div",{className:"flex flex-col items-center",children:t.jsx("button",{onClick:o,disabled:s,className:"bg-blue-500 text-white text-xs sm:text-sm px-4 py-2 rounded-full hover:bg-blue-600 transition-colors duration-300 shadow-md focus:outline-none focus:ring-2 focus:ring-blue-400 focus:ring-opacity-50",children:s?t.jsxs("span",{className:"flex items-center",children:[t.jsxs("svg",{className:"animate-spin -ml-1 mr-2 h-4 w-4 text-white",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",children:[t.jsx("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),t.jsx("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}),"Verifying..."]}):"Verify Wallet"})}):null},Qt=({token:e,isOpen:r,onClose:a,onUpdate:s})=>{const[n,o]=d.useState(!1),[u,l]=d.useState(!1),[i,h]=d.useState((e==null?void 0:e.description)||""),[m,j]=d.useState((e==null?void 0:e.twitter)||""),[E,N]=d.useState((e==null?void 0:e.telegram)||""),[C,y]=d.useState((e==null?void 0:e.website)||""),[P,x]=d.useState((e==null?void 0:e.discord)||""),[S,M]=d.useState(null),[V,L]=d.useState(!1),U=d.useRef(null),[p,R]=d.useState(0);d.useEffect(()=>{const g=[e.twitter,e.telegram,e.discord,e.website].filter(Boolean);R(g.length)},[e]);const D=!e.logo||!e.description||p<3;d.useEffect(()=>{F()},[]);const F=async()=>{var g;try{const ee=await(await fetch("/api/auth/user")).json();l(ee.authenticated&&((g=ee.address)==null?void 0:g.toLowerCase())===e.creatorAddress.toLowerCase())}catch(A){console.error("Error checking authentication:",A),l(!1)}},ae=g=>{g.preventDefault(),L(!0)},se=g=>{g.preventDefault(),L(!1)},J=async g=>{g.preventDefault(),L(!1);const A=g.dataTransfer.files[0];await k(A)},T=async g=>{var ee;const A=(ee=g.target.files)==null?void 0:ee[0];A&&await k(A)},k=async g=>{if(g.size>1024*1024){b.error("File size should be less than 1MB");return}o(!0);try{const A=await jt(g);M(A.url),b.success("Image uploaded successfully!")}catch(A){console.error("Error uploading image:",A),b.error("Failed to upload image. Please try again.")}finally{o(!1)}},z=async g=>{if(g.preventDefault(),!u){b.error("Please verify your wallet first");return}o(!0);try{const A=await wt(e.address,{logo:S||e.logo,description:i||e.description,twitter:m||e.twitter,telegram:E||e.telegram,website:C||e.website,discord:P||e.discord});b.success("Token information updated successfully!"),s(A),a()}catch(A){console.error("Error updating token:",A),b.error("Failed to update token information. Please try again.")}finally{o(!1)}};return r?D?t.jsx("div",{className:"fixed inset-0 bg-black/80 flex items-center justify-center p-4 z-50",children:t.jsxs("div",{className:"bg-[#111111] rounded-xl w-full max-w-sm mx-auto p-4",children:[t.jsxs("div",{className:"flex justify-between items-center mb-4",children:[t.jsx("h2",{className:"text-lg font-semibold text-white",children:"Update Token Information"}),t.jsx("button",{onClick:a,className:"text-gray-400 hover:text-white transition-colors duration-200",children:t.jsx(Be,{className:"h-5 w-5"})})]}),u?t.jsxs("form",{onSubmit:z,children:[t.jsxs("div",{className:"space-y-3",children:[!e.logo&&t.jsxs(t.Fragment,{children:[t.jsxs("div",{className:`border border-dashed rounded-lg p-3 text-center cursor-pointer ${V?"border-blue-500 bg-[var(--card2)]":"border-gray-600"}`,onDragOver:ae,onDragLeave:se,onDrop:J,onClick:()=>{var g;return(g=U.current)==null?void 0:g.click()},children:[t.jsx("input",{type:"file",ref:U,className:"hidden",accept:"image/*",onChange:T}),t.jsx(Mt,{className:"mx-auto h-8 w-8 text-gray-400"}),t.jsx("p",{className:"mt-2 text-xs text-gray-400",children:"Drag and drop an image here, or click to select"}),t.jsx("p",{className:"text-xs text-gray-500",children:"Max file size: 1MB"})]}),S&&t.jsx("div",{className:"mt-3",children:t.jsx("img",{src:S,alt:"Token Logo",className:"w-16 h-16 mx-auto rounded-full"})})]}),!e.description&&t.jsxs("div",{children:[t.jsx("label",{className:"block text-xs font-medium text-gray-400 mb-1",children:"Description"}),t.jsx("textarea",{value:i,onChange:g=>h(g.target.value),className:"w-full bg-[var(--card2)] text-white text-sm rounded-lg border-gray-700 focus:border-blue-500 focus:ring-1 focus:ring-blue-500 shadow-sm resize-none",rows:3,placeholder:"Enter your token's description..."})]}),!e.twitter&&t.jsxs("div",{children:[t.jsx("label",{className:"block text-xs font-medium text-gray-400 mb-1",children:"Twitter"}),t.jsx("input",{type:"text",value:m,onChange:g=>j(g.target.value),className:"w-full bg-[var(--card2)] text-white text-sm h-9 rounded-lg border-gray-700 focus:border-blue-500 focus:ring-1 focus:ring-blue-500 shadow-sm",placeholder:"https://twitter.com/username"})]}),!e.telegram&&t.jsxs("div",{children:[t.jsx("label",{className:"block text-xs font-medium text-gray-400 mb-1",children:"Telegram"}),t.jsx("input",{type:"text",value:E,onChange:g=>N(g.target.value),className:"w-full bg-[var(--card2)] text-white text-sm h-9 rounded-lg border-gray-700 focus:border-blue-500 focus:ring-1 focus:ring-blue-500 shadow-sm",placeholder:"https://t.me/username"})]}),!e.website&&t.jsxs("div",{children:[t.jsx("label",{className:"block text-xs font-medium text-gray-400 mb-1",children:"Website"}),t.jsx("input",{type:"text",value:C,onChange:g=>y(g.target.value),className:"w-full bg-[var(--card2)] text-white text-sm h-9 rounded-lg border-gray-700 focus:border-blue-500 focus:ring-1 focus:ring-blue-500 shadow-sm",placeholder:"https://example.com"})]}),!e.discord&&t.jsxs("div",{children:[t.jsx("label",{className:"block text-xs font-medium text-gray-400 mb-1",children:"Discord"}),t.jsx("input",{type:"text",value:P,onChange:g=>x(g.target.value),className:"w-full bg-[var(--card2)] text-white text-sm h-9 rounded-lg border-gray-700 focus:border-blue-500 focus:ring-1 focus:ring-blue-500 shadow-sm",placeholder:"https://discord.gg/invite"})]})]}),t.jsxs("div",{className:"mt-4 flex justify-end space-x-3",children:[t.jsx("button",{type:"button",onClick:a,className:"px-3 py-1.5 text-xs text-gray-400 hover:text-white transition-colors duration-200",children:"Cancel"}),t.jsx("button",{type:"submit",disabled:n,className:"px-3 py-1.5 text-xs bg-blue-500 text-white rounded-lg hover:bg-blue-600 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:ring-offset-2 focus:ring-offset-[#111111] disabled:opacity-50 disabled:cursor-not-allowed transition-colors duration-200",children:n?"Updating...":"Update"})]})]}):t.jsxs("div",{className:"text-center",children:[t.jsx("p",{className:"mb-4 text-gray-400 text-sm",children:"Please verify your wallet to update token information"}),t.jsx(Wt,{onAuthSuccess:()=>{l(!0),b.success("Wallet verified successfully!")}})]})]})}):t.jsx("div",{className:"fixed inset-0 bg-black/80 flex items-center justify-center p-4 z-50",children:t.jsxs("div",{className:"bg-[#111111] rounded-xl w-full max-w-sm mx-auto p-4",children:[t.jsxs("div",{className:"flex justify-between items-center mb-4",children:[t.jsx("h2",{className:"text-lg font-semibold text-white",children:"Token Information Complete"}),t.jsx("button",{onClick:a,className:"text-gray-400 hover:text-white transition-colors duration-200",children:t.jsx(Be,{className:"h-5 w-5"})})]}),t.jsx("p",{className:"text-gray-400 text-sm mb-4",children:"This token has all required information (logo, description, and social links). No further updates are needed."}),t.jsx("div",{className:"flex justify-end",children:t.jsx("button",{onClick:a,className:"px-3 py-1.5 text-xs bg-blue-500 text-white rounded-lg hover:bg-blue-600 transition-colors duration-200",children:"Close"})})]})}):null};var ve={},Me={exports:{}},Gt="SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED",Kt=Gt,Vt=Kt;function Ie(){}function De(){}De.resetWarningCache=Ie;var Xt=function(){function e(s,n,o,u,l,i){if(i!==Vt){var h=new Error("Calling PropTypes validators directly is not supported by the `prop-types` package. Use PropTypes.checkPropTypes() to call them. Read more at http://fb.me/use-check-prop-types");throw h.name="Invariant Violation",h}}e.isRequired=e;function r(){return e}var a={array:e,bigint:e,bool:e,func:e,number:e,object:e,string:e,symbol:e,any:e,arrayOf:r,element:e,elementType:e,instanceOf:r,node:e,objectOf:r,oneOf:r,oneOfType:r,shape:r,exact:r,checkPropTypes:De,resetWarningCache:Ie};return a.PropTypes=a,a};Me.exports=Xt();var Oe=Me.exports,$e={L:1,M:0,Q:3,H:2},Ue={MODE_NUMBER:1,MODE_ALPHA_NUM:2,MODE_8BIT_BYTE:4,MODE_KANJI:8},Yt=Ue;function Fe(e){this.mode=Yt.MODE_8BIT_BYTE,this.data=e}Fe.prototype={getLength:function(e){return this.data.length},write:function(e){for(var r=0;r<this.data.length;r++)e.put(this.data.charCodeAt(r),8)}};var Jt=Fe,fe=$e;function G(e,r){this.totalCount=e,this.dataCount=r}G.RS_BLOCK_TABLE=[[1,26,19],[1,26,16],[1,26,13],[1,26,9],[1,44,34],[1,44,28],[1,44,22],[1,44,16],[1,70,55],[1,70,44],[2,35,17],[2,35,13],[1,100,80],[2,50,32],[2,50,24],[4,25,9],[1,134,108],[2,67,43],[2,33,15,2,34,16],[2,33,11,2,34,12],[2,86,68],[4,43,27],[4,43,19],[4,43,15],[2,98,78],[4,49,31],[2,32,14,4,33,15],[4,39,13,1,40,14],[2,121,97],[2,60,38,2,61,39],[4,40,18,2,41,19],[4,40,14,2,41,15],[2,146,116],[3,58,36,2,59,37],[4,36,16,4,37,17],[4,36,12,4,37,13],[2,86,68,2,87,69],[4,69,43,1,70,44],[6,43,19,2,44,20],[6,43,15,2,44,16],[4,101,81],[1,80,50,4,81,51],[4,50,22,4,51,23],[3,36,12,8,37,13],[2,116,92,2,117,93],[6,58,36,2,59,37],[4,46,20,6,47,21],[7,42,14,4,43,15],[4,133,107],[8,59,37,1,60,38],[8,44,20,4,45,21],[12,33,11,4,34,12],[3,145,115,1,146,116],[4,64,40,5,65,41],[11,36,16,5,37,17],[11,36,12,5,37,13],[5,109,87,1,110,88],[5,65,41,5,66,42],[5,54,24,7,55,25],[11,36,12],[5,122,98,1,123,99],[7,73,45,3,74,46],[15,43,19,2,44,20],[3,45,15,13,46,16],[1,135,107,5,136,108],[10,74,46,1,75,47],[1,50,22,15,51,23],[2,42,14,17,43,15],[5,150,120,1,151,121],[9,69,43,4,70,44],[17,50,22,1,51,23],[2,42,14,19,43,15],[3,141,113,4,142,114],[3,70,44,11,71,45],[17,47,21,4,48,22],[9,39,13,16,40,14],[3,135,107,5,136,108],[3,67,41,13,68,42],[15,54,24,5,55,25],[15,43,15,10,44,16],[4,144,116,4,145,117],[17,68,42],[17,50,22,6,51,23],[19,46,16,6,47,17],[2,139,111,7,140,112],[17,74,46],[7,54,24,16,55,25],[34,37,13],[4,151,121,5,152,122],[4,75,47,14,76,48],[11,54,24,14,55,25],[16,45,15,14,46,16],[6,147,117,4,148,118],[6,73,45,14,74,46],[11,54,24,16,55,25],[30,46,16,2,47,17],[8,132,106,4,133,107],[8,75,47,13,76,48],[7,54,24,22,55,25],[22,45,15,13,46,16],[10,142,114,2,143,115],[19,74,46,4,75,47],[28,50,22,6,51,23],[33,46,16,4,47,17],[8,152,122,4,153,123],[22,73,45,3,74,46],[8,53,23,26,54,24],[12,45,15,28,46,16],[3,147,117,10,148,118],[3,73,45,23,74,46],[4,54,24,31,55,25],[11,45,15,31,46,16],[7,146,116,7,147,117],[21,73,45,7,74,46],[1,53,23,37,54,24],[19,45,15,26,46,16],[5,145,115,10,146,116],[19,75,47,10,76,48],[15,54,24,25,55,25],[23,45,15,25,46,16],[13,145,115,3,146,116],[2,74,46,29,75,47],[42,54,24,1,55,25],[23,45,15,28,46,16],[17,145,115],[10,74,46,23,75,47],[10,54,24,35,55,25],[19,45,15,35,46,16],[17,145,115,1,146,116],[14,74,46,21,75,47],[29,54,24,19,55,25],[11,45,15,46,46,16],[13,145,115,6,146,116],[14,74,46,23,75,47],[44,54,24,7,55,25],[59,46,16,1,47,17],[12,151,121,7,152,122],[12,75,47,26,76,48],[39,54,24,14,55,25],[22,45,15,41,46,16],[6,151,121,14,152,122],[6,75,47,34,76,48],[46,54,24,10,55,25],[2,45,15,64,46,16],[17,152,122,4,153,123],[29,74,46,14,75,47],[49,54,24,10,55,25],[24,45,15,46,46,16],[4,152,122,18,153,123],[13,74,46,32,75,47],[48,54,24,14,55,25],[42,45,15,32,46,16],[20,147,117,4,148,118],[40,75,47,7,76,48],[43,54,24,22,55,25],[10,45,15,67,46,16],[19,148,118,6,149,119],[18,75,47,31,76,48],[34,54,24,34,55,25],[20,45,15,61,46,16]];G.getRSBlocks=function(e,r){var a=G.getRsBlockTable(e,r);if(a==null)throw new Error("bad rs block @ typeNumber:"+e+"/errorCorrectLevel:"+r);for(var s=a.length/3,n=new Array,o=0;o<s;o++)for(var u=a[o*3+0],l=a[o*3+1],i=a[o*3+2],h=0;h<u;h++)n.push(new G(l,i));return n};G.getRsBlockTable=function(e,r){switch(r){case fe.L:return G.RS_BLOCK_TABLE[(e-1)*4+0];case fe.M:return G.RS_BLOCK_TABLE[(e-1)*4+1];case fe.Q:return G.RS_BLOCK_TABLE[(e-1)*4+2];case fe.H:return G.RS_BLOCK_TABLE[(e-1)*4+3];default:return}};var Zt=G;function ze(){this.buffer=new Array,this.length=0}ze.prototype={get:function(e){var r=Math.floor(e/8);return(this.buffer[r]>>>7-e%8&1)==1},put:function(e,r){for(var a=0;a<r;a++)this.putBit((e>>>r-a-1&1)==1)},getLengthInBits:function(){return this.length},putBit:function(e){var r=Math.floor(this.length/8);this.buffer.length<=r&&this.buffer.push(0),e&&(this.buffer[r]|=128>>>this.length%8),this.length++}};var qt=ze,H={glog:function(e){if(e<1)throw new Error("glog("+e+")");return H.LOG_TABLE[e]},gexp:function(e){for(;e<0;)e+=255;for(;e>=256;)e-=255;return H.EXP_TABLE[e]},EXP_TABLE:new Array(256),LOG_TABLE:new Array(256)};for(var _=0;_<8;_++)H.EXP_TABLE[_]=1<<_;for(var _=8;_<256;_++)H.EXP_TABLE[_]=H.EXP_TABLE[_-4]^H.EXP_TABLE[_-5]^H.EXP_TABLE[_-6]^H.EXP_TABLE[_-8];for(var _=0;_<255;_++)H.LOG_TABLE[H.EXP_TABLE[_]]=_;var He=H,re=He;function pe(e,r){if(e.length==null)throw new Error(e.length+"/"+r);for(var a=0;a<e.length&&e[a]==0;)a++;this.num=new Array(e.length-a+r);for(var s=0;s<e.length-a;s++)this.num[s]=e[s+a]}pe.prototype={get:function(e){return this.num[e]},getLength:function(){return this.num.length},multiply:function(e){for(var r=new Array(this.getLength()+e.getLength()-1),a=0;a<this.getLength();a++)for(var s=0;s<e.getLength();s++)r[a+s]^=re.gexp(re.glog(this.get(a))+re.glog(e.get(s)));return new pe(r,0)},mod:function(e){if(this.getLength()-e.getLength()<0)return this;for(var r=re.glog(this.get(0))-re.glog(e.get(0)),a=new Array(this.getLength()),s=0;s<this.getLength();s++)a[s]=this.get(s);for(var s=0;s<e.getLength();s++)a[s]^=re.gexp(re.glog(e.get(s))+r);return new pe(a,0).mod(e)}};var We=pe,O=Ue,_e=We,er=He,Z={PATTERN000:0,PATTERN001:1,PATTERN010:2,PATTERN011:3,PATTERN100:4,PATTERN101:5,PATTERN110:6,PATTERN111:7},B={PATTERN_POSITION_TABLE:[[],[6,18],[6,22],[6,26],[6,30],[6,34],[6,22,38],[6,24,42],[6,26,46],[6,28,50],[6,30,54],[6,32,58],[6,34,62],[6,26,46,66],[6,26,48,70],[6,26,50,74],[6,30,54,78],[6,30,56,82],[6,30,58,86],[6,34,62,90],[6,28,50,72,94],[6,26,50,74,98],[6,30,54,78,102],[6,28,54,80,106],[6,32,58,84,110],[6,30,58,86,114],[6,34,62,90,118],[6,26,50,74,98,122],[6,30,54,78,102,126],[6,26,52,78,104,130],[6,30,56,82,108,134],[6,34,60,86,112,138],[6,30,58,86,114,142],[6,34,62,90,118,146],[6,30,54,78,102,126,150],[6,24,50,76,102,128,154],[6,28,54,80,106,132,158],[6,32,58,84,110,136,162],[6,26,54,82,110,138,166],[6,30,58,86,114,142,170]],G15:1335,G18:7973,G15_MASK:21522,getBCHTypeInfo:function(e){for(var r=e<<10;B.getBCHDigit(r)-B.getBCHDigit(B.G15)>=0;)r^=B.G15<<B.getBCHDigit(r)-B.getBCHDigit(B.G15);return(e<<10|r)^B.G15_MASK},getBCHTypeNumber:function(e){for(var r=e<<12;B.getBCHDigit(r)-B.getBCHDigit(B.G18)>=0;)r^=B.G18<<B.getBCHDigit(r)-B.getBCHDigit(B.G18);return e<<12|r},getBCHDigit:function(e){for(var r=0;e!=0;)r++,e>>>=1;return r},getPatternPosition:function(e){return B.PATTERN_POSITION_TABLE[e-1]},getMask:function(e,r,a){switch(e){case Z.PATTERN000:return(r+a)%2==0;case Z.PATTERN001:return r%2==0;case Z.PATTERN010:return a%3==0;case Z.PATTERN011:return(r+a)%3==0;case Z.PATTERN100:return(Math.floor(r/2)+Math.floor(a/3))%2==0;case Z.PATTERN101:return r*a%2+r*a%3==0;case Z.PATTERN110:return(r*a%2+r*a%3)%2==0;case Z.PATTERN111:return(r*a%3+(r+a)%2)%2==0;default:throw new Error("bad maskPattern:"+e)}},getErrorCorrectPolynomial:function(e){for(var r=new _e([1],0),a=0;a<e;a++)r=r.multiply(new _e([1,er.gexp(a)],0));return r},getLengthInBits:function(e,r){if(1<=r&&r<10)switch(e){case O.MODE_NUMBER:return 10;case O.MODE_ALPHA_NUM:return 9;case O.MODE_8BIT_BYTE:return 8;case O.MODE_KANJI:return 8;default:throw new Error("mode:"+e)}else if(r<27)switch(e){case O.MODE_NUMBER:return 12;case O.MODE_ALPHA_NUM:return 11;case O.MODE_8BIT_BYTE:return 16;case O.MODE_KANJI:return 10;default:throw new Error("mode:"+e)}else if(r<41)switch(e){case O.MODE_NUMBER:return 14;case O.MODE_ALPHA_NUM:return 13;case O.MODE_8BIT_BYTE:return 16;case O.MODE_KANJI:return 12;default:throw new Error("mode:"+e)}else throw new Error("type:"+r)},getLostPoint:function(e){for(var r=e.getModuleCount(),a=0,s=0;s<r;s++)for(var n=0;n<r;n++){for(var o=0,u=e.isDark(s,n),l=-1;l<=1;l++)if(!(s+l<0||r<=s+l))for(var i=-1;i<=1;i++)n+i<0||r<=n+i||l==0&&i==0||u==e.isDark(s+l,n+i)&&o++;o>5&&(a+=3+o-5)}for(var s=0;s<r-1;s++)for(var n=0;n<r-1;n++){var h=0;e.isDark(s,n)&&h++,e.isDark(s+1,n)&&h++,e.isDark(s,n+1)&&h++,e.isDark(s+1,n+1)&&h++,(h==0||h==4)&&(a+=3)}for(var s=0;s<r;s++)for(var n=0;n<r-6;n++)e.isDark(s,n)&&!e.isDark(s,n+1)&&e.isDark(s,n+2)&&e.isDark(s,n+3)&&e.isDark(s,n+4)&&!e.isDark(s,n+5)&&e.isDark(s,n+6)&&(a+=40);for(var n=0;n<r;n++)for(var s=0;s<r-6;s++)e.isDark(s,n)&&!e.isDark(s+1,n)&&e.isDark(s+2,n)&&e.isDark(s+3,n)&&e.isDark(s+4,n)&&!e.isDark(s+5,n)&&e.isDark(s+6,n)&&(a+=40);for(var m=0,n=0;n<r;n++)for(var s=0;s<r;s++)e.isDark(s,n)&&m++;var j=Math.abs(100*m/r/r-50)/5;return a+=j*10,a}},tr=B,rr=Jt,Qe=Zt,Ge=qt,q=tr,ar=We;function K(e,r){this.typeNumber=e,this.errorCorrectLevel=r,this.modules=null,this.moduleCount=0,this.dataCache=null,this.dataList=[]}var I=K.prototype;I.addData=function(e){var r=new rr(e);this.dataList.push(r),this.dataCache=null};I.isDark=function(e,r){if(e<0||this.moduleCount<=e||r<0||this.moduleCount<=r)throw new Error(e+","+r);return this.modules[e][r]};I.getModuleCount=function(){return this.moduleCount};I.make=function(){if(this.typeNumber<1){var e=1;for(e=1;e<40;e++){for(var r=Qe.getRSBlocks(e,this.errorCorrectLevel),a=new Ge,s=0,n=0;n<r.length;n++)s+=r[n].dataCount;for(var n=0;n<this.dataList.length;n++){var o=this.dataList[n];a.put(o.mode,4),a.put(o.getLength(),q.getLengthInBits(o.mode,e)),o.write(a)}if(a.getLengthInBits()<=s*8)break}this.typeNumber=e}this.makeImpl(!1,this.getBestMaskPattern())};I.makeImpl=function(e,r){this.moduleCount=this.typeNumber*4+17,this.modules=new Array(this.moduleCount);for(var a=0;a<this.moduleCount;a++){this.modules[a]=new Array(this.moduleCount);for(var s=0;s<this.moduleCount;s++)this.modules[a][s]=null}this.setupPositionProbePattern(0,0),this.setupPositionProbePattern(this.moduleCount-7,0),this.setupPositionProbePattern(0,this.moduleCount-7),this.setupPositionAdjustPattern(),this.setupTimingPattern(),this.setupTypeInfo(e,r),this.typeNumber>=7&&this.setupTypeNumber(e),this.dataCache==null&&(this.dataCache=K.createData(this.typeNumber,this.errorCorrectLevel,this.dataList)),this.mapData(this.dataCache,r)};I.setupPositionProbePattern=function(e,r){for(var a=-1;a<=7;a++)if(!(e+a<=-1||this.moduleCount<=e+a))for(var s=-1;s<=7;s++)r+s<=-1||this.moduleCount<=r+s||(0<=a&&a<=6&&(s==0||s==6)||0<=s&&s<=6&&(a==0||a==6)||2<=a&&a<=4&&2<=s&&s<=4?this.modules[e+a][r+s]=!0:this.modules[e+a][r+s]=!1)};I.getBestMaskPattern=function(){for(var e=0,r=0,a=0;a<8;a++){this.makeImpl(!0,a);var s=q.getLostPoint(this);(a==0||e>s)&&(e=s,r=a)}return r};I.createMovieClip=function(e,r,a){var s=e.createEmptyMovieClip(r,a),n=1;this.make();for(var o=0;o<this.modules.length;o++)for(var u=o*n,l=0;l<this.modules[o].length;l++){var i=l*n,h=this.modules[o][l];h&&(s.beginFill(0,100),s.moveTo(i,u),s.lineTo(i+n,u),s.lineTo(i+n,u+n),s.lineTo(i,u+n),s.endFill())}return s};I.setupTimingPattern=function(){for(var e=8;e<this.moduleCount-8;e++)this.modules[e][6]==null&&(this.modules[e][6]=e%2==0);for(var r=8;r<this.moduleCount-8;r++)this.modules[6][r]==null&&(this.modules[6][r]=r%2==0)};I.setupPositionAdjustPattern=function(){for(var e=q.getPatternPosition(this.typeNumber),r=0;r<e.length;r++)for(var a=0;a<e.length;a++){var s=e[r],n=e[a];if(this.modules[s][n]==null)for(var o=-2;o<=2;o++)for(var u=-2;u<=2;u++)o==-2||o==2||u==-2||u==2||o==0&&u==0?this.modules[s+o][n+u]=!0:this.modules[s+o][n+u]=!1}};I.setupTypeNumber=function(e){for(var r=q.getBCHTypeNumber(this.typeNumber),a=0;a<18;a++){var s=!e&&(r>>a&1)==1;this.modules[Math.floor(a/3)][a%3+this.moduleCount-8-3]=s}for(var a=0;a<18;a++){var s=!e&&(r>>a&1)==1;this.modules[a%3+this.moduleCount-8-3][Math.floor(a/3)]=s}};I.setupTypeInfo=function(e,r){for(var a=this.errorCorrectLevel<<3|r,s=q.getBCHTypeInfo(a),n=0;n<15;n++){var o=!e&&(s>>n&1)==1;n<6?this.modules[n][8]=o:n<8?this.modules[n+1][8]=o:this.modules[this.moduleCount-15+n][8]=o}for(var n=0;n<15;n++){var o=!e&&(s>>n&1)==1;n<8?this.modules[8][this.moduleCount-n-1]=o:n<9?this.modules[8][15-n-1+1]=o:this.modules[8][15-n-1]=o}this.modules[this.moduleCount-8][8]=!e};I.mapData=function(e,r){for(var a=-1,s=this.moduleCount-1,n=7,o=0,u=this.moduleCount-1;u>0;u-=2)for(u==6&&u--;;){for(var l=0;l<2;l++)if(this.modules[s][u-l]==null){var i=!1;o<e.length&&(i=(e[o]>>>n&1)==1);var h=q.getMask(r,s,u-l);h&&(i=!i),this.modules[s][u-l]=i,n--,n==-1&&(o++,n=7)}if(s+=a,s<0||this.moduleCount<=s){s-=a,a=-a;break}}};K.PAD0=236;K.PAD1=17;K.createData=function(e,r,a){for(var s=Qe.getRSBlocks(e,r),n=new Ge,o=0;o<a.length;o++){var u=a[o];n.put(u.mode,4),n.put(u.getLength(),q.getLengthInBits(u.mode,e)),u.write(n)}for(var l=0,o=0;o<s.length;o++)l+=s[o].dataCount;if(n.getLengthInBits()>l*8)throw new Error("code length overflow. ("+n.getLengthInBits()+">"+l*8+")");for(n.getLengthInBits()+4<=l*8&&n.put(0,4);n.getLengthInBits()%8!=0;)n.putBit(!1);for(;!(n.getLengthInBits()>=l*8||(n.put(K.PAD0,8),n.getLengthInBits()>=l*8));)n.put(K.PAD1,8);return K.createBytes(n,s)};K.createBytes=function(e,r){for(var a=0,s=0,n=0,o=new Array(r.length),u=new Array(r.length),l=0;l<r.length;l++){var i=r[l].dataCount,h=r[l].totalCount-i;s=Math.max(s,i),n=Math.max(n,h),o[l]=new Array(i);for(var m=0;m<o[l].length;m++)o[l][m]=255&e.buffer[m+a];a+=i;var j=q.getErrorCorrectPolynomial(h),E=new ar(o[l],j.getLength()-1),N=E.mod(j);u[l]=new Array(j.getLength()-1);for(var m=0;m<u[l].length;m++){var C=m+N.getLength()-u[l].length;u[l][m]=C>=0?N.get(C):0}}for(var y=0,m=0;m<r.length;m++)y+=r[m].totalCount;for(var P=new Array(y),x=0,m=0;m<s;m++)for(var l=0;l<r.length;l++)m<o[l].length&&(P[x++]=o[l][m]);for(var m=0;m<n;m++)for(var l=0;l<r.length;l++)m<u[l].length&&(P[x++]=u[l][m]);return P};var sr=K,Ne={};Object.defineProperty(Ne,"__esModule",{value:!0});var nr=Object.assign||function(e){for(var r=1;r<arguments.length;r++){var a=arguments[r];for(var s in a)Object.prototype.hasOwnProperty.call(a,s)&&(e[s]=a[s])}return e},or=Oe,$=Ve(or),Ke=d,ge=Ve(Ke);function Ve(e){return e&&e.__esModule?e:{default:e}}function ir(e,r){var a={};for(var s in e)r.indexOf(s)>=0||Object.prototype.hasOwnProperty.call(e,s)&&(a[s]=e[s]);return a}var lr={bgColor:$.default.oneOfType([$.default.object,$.default.string]).isRequired,bgD:$.default.string.isRequired,fgColor:$.default.oneOfType([$.default.object,$.default.string]).isRequired,fgD:$.default.string.isRequired,size:$.default.number.isRequired,title:$.default.string,viewBoxSize:$.default.number.isRequired,xmlns:$.default.string},Ce=(0,Ke.forwardRef)(function(e,r){var a=e.bgColor,s=e.bgD,n=e.fgD,o=e.fgColor,u=e.size,l=e.title,i=e.viewBoxSize,h=e.xmlns,m=h===void 0?"http://www.w3.org/2000/svg":h,j=ir(e,["bgColor","bgD","fgD","fgColor","size","title","viewBoxSize","xmlns"]);return ge.default.createElement("svg",nr({},j,{height:u,ref:r,viewBox:"0 0 "+i+" "+i,width:u,xmlns:m}),l?ge.default.createElement("title",null,l):null,ge.default.createElement("path",{d:s,fill:a}),ge.default.createElement("path",{d:n,fill:o}))});Ce.displayName="QRCodeSvg";Ce.propTypes=lr;Ne.default=Ce;Object.defineProperty(ve,"__esModule",{value:!0});ve.QRCode=void 0;var cr=Object.assign||function(e){for(var r=1;r<arguments.length;r++){var a=arguments[r];for(var s in a)Object.prototype.hasOwnProperty.call(a,s)&&(e[s]=a[s])}return e},dr=Oe,Y=ue(dr),ur=$e,hr=ue(ur),mr=sr,fr=ue(mr),Xe=d,gr=ue(Xe),xr=Ne,pr=ue(xr);function ue(e){return e&&e.__esModule?e:{default:e}}function vr(e,r){var a={};for(var s in e)r.indexOf(s)>=0||Object.prototype.hasOwnProperty.call(e,s)&&(a[s]=e[s]);return a}var br={bgColor:Y.default.oneOfType([Y.default.object,Y.default.string]),fgColor:Y.default.oneOfType([Y.default.object,Y.default.string]),level:Y.default.string,size:Y.default.number,value:Y.default.string.isRequired},be=(0,Xe.forwardRef)(function(e,r){var a=e.bgColor,s=a===void 0?"#FFFFFF":a,n=e.fgColor,o=n===void 0?"#000000":n,u=e.level,l=u===void 0?"L":u,i=e.size,h=i===void 0?256:i,m=e.value,j=vr(e,["bgColor","fgColor","level","size","value"]),E=new fr.default(-1,hr.default[l]);E.addData(m),E.make();var N=E.modules;return gr.default.createElement(pr.default,cr({},j,{bgColor:s,bgD:N.map(function(C,y){return C.map(function(P,x){return P?"":"M "+x+" "+y+" l 1 0 0 1 -1 0 Z"}).join(" ")}).join(" "),fgColor:o,fgD:N.map(function(C,y){return C.map(function(P,x){return P?"M "+x+" "+y+" l 1 0 0 1 -1 0 Z":""}).join(" ")}).join(" "),ref:r,size:h,viewBoxSize:N.length}))});ve.QRCode=be;be.displayName="QRCode";be.propTypes=br;var yr=ve.default=be;const wr=({address:e,chainId:r})=>{var J;const{address:a}=we(),s=je(),{isEmbeddedWallet:n,walletAddress:o}=It(),{user:u,isAuthenticated:l}=Se(),i=r||s,{data:h,refetch:m}=it({address:e||void 0,query:{enabled:!!e,refetchInterval:5e3}}),[j,E]=d.useState(!1),[N,C]=d.useState(""),[y,P]=d.useState(""),[x,S]=d.useState(!1),[M,V]=d.useState(null),[L,U]=d.useState("deposit"),p=async()=>{if(e)try{await navigator.clipboard.writeText(e),E(!0),b.success("Address copied to clipboard!"),setTimeout(()=>E(!1),2e3)}catch{b.error("Failed to copy address")}},R=async T=>{if(T.preventDefault(),!e||!N||!y){b.error("Please fill in all fields");return}if(!n||!l){b.error("Withdraw is only available for embedded wallets. Please log in.");return}if(!/^0x[a-fA-F0-9]{40}$/i.test(N)){b.error("Invalid recipient address format");return}const k=parseFloat(y);if(isNaN(k)||k<=0){b.error("Please enter a valid amount");return}if(h&&parseFloat(Ae(h.value,18))<k){b.error("Insufficient balance");return}S(!0),V(null);try{const z=ht(y,18),g=await Nt(N,z.toString(),i);V(g.txHash),b.success(`Withdrawal successful! Transaction: ${g.txHash}`),C(""),P(""),m()}catch(z){b.error(z.message||"Failed to withdraw funds")}finally{S(!1)}},D=()=>{if(h){const T=parseFloat(Ae(h.value,18)),k=Math.max(0,T-.001);P(k>0?k.toFixed(6):"0")}},F=d.useCallback((T,k)=>({[ut.id]:`https://etherscan.io/tx/${T}`,[dt.id]:`https://basescan.org/tx/${T}`,[ct.id]:`https://sepolia.basescan.org/tx/${T}`,[lt.id]:`https://arbiscan.io/tx/${T}`})[k]||`https://etherscan.io/tx/${T}`,[]),ae=(a==null?void 0:a.toLowerCase())===e.toLowerCase()||(o==null?void 0:o.toLowerCase())===e.toLowerCase()||((J=u==null?void 0:u.address)==null?void 0:J.toLowerCase())===e.toLowerCase(),se=n&&l&&ae;return t.jsx("div",{className:"bg-[var(--card)] rounded-lg p-6",children:t.jsxs("div",{className:"space-y-8",children:[t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium text-gray-300 mb-3",children:"Wallet Address"}),t.jsx("div",{className:"w-full bg-[var(--card2)] border border-[var(--card-boarder)] rounded-lg px-4 py-2.5 text-white font-mono text-sm break-all",children:e||"N/A"})]}),t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium text-gray-300 mb-3",children:"Balance"}),t.jsx("div",{className:"w-full bg-[var(--card2)] border border-[var(--card-boarder)] rounded-lg px-4 py-2.5 text-white font-mono text-sm",children:h?`${de(h.value.toString())} ${h.symbol}`:"Loading..."})]}),se&&t.jsxs("div",{className:"border-t border-[var(--card-boarder)] pt-6",children:[t.jsxs("div",{className:"flex gap-2 mb-6 bg-[var(--card2)] p-1 rounded-lg",children:[t.jsx("button",{onClick:()=>U("deposit"),className:`flex-1 py-2.5 px-4 rounded-md text-sm font-medium transition-all ${L==="deposit"?"bg-gradient-to-r from-[var(--primary)] to-[var(--accent-purple)] text-black shadow-[0_0_10px_rgba(0,243,255,0.5)]":"text-gray-400 hover:text-white hover:bg-[var(--card-hover)]"}`,children:"Deposit"}),t.jsx("button",{onClick:()=>U("withdraw"),className:`flex-1 py-2.5 px-4 rounded-md text-sm font-medium transition-all ${L==="withdraw"?"bg-gradient-to-r from-[var(--primary)] to-[var(--accent-purple)] text-black shadow-[0_0_10px_rgba(0,243,255,0.5)]":"text-gray-400 hover:text-white hover:bg-[var(--card-hover)]"}`,children:"Withdraw"})]}),L==="deposit"&&t.jsxs("div",{children:[t.jsx("h3",{className:"text-lg font-semibold text-white mb-4",children:"Deposit ETH"}),t.jsx("p",{className:"text-sm text-gray-400 mb-4",children:"Send ETH to this address from your external wallet"}),e&&t.jsxs("div",{className:"flex flex-col items-center gap-4",children:[t.jsx("div",{className:"bg-white p-4 rounded-lg",children:t.jsx(yr,{value:e,size:200,level:"H"})}),t.jsx("div",{className:"w-full",children:t.jsxs("div",{className:"flex items-center gap-2",children:[t.jsx("input",{type:"text",value:e,readOnly:!0,className:"flex-1 bg-[var(--card2)] border border-[var(--card-boarder)] rounded-lg px-4 py-2 text-white font-mono text-xs break-all"}),t.jsx("button",{onClick:p,className:"p-2.5 bg-[var(--card2)] border border-[var(--card-boarder)] rounded-lg hover:bg-[var(--card-hover)] transition-colors",title:"Copy address",children:j?t.jsx(xt,{className:"w-5 h-5 text-[var(--primary)]"}):t.jsx(pt,{className:"w-5 h-5 text-gray-400"})})]})})]})]}),L==="withdraw"&&t.jsxs("div",{children:[t.jsx("h3",{className:"text-lg font-semibold text-white mb-4",children:"Withdraw ETH"}),t.jsx("p",{className:"text-sm text-gray-400 mb-4",children:"Send ETH from your embedded wallet to another address"}),t.jsxs("form",{onSubmit:R,className:"space-y-4",children:[t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium text-gray-300 mb-2",children:"Recipient Address"}),t.jsx("input",{type:"text",value:N,onChange:T=>C(T.target.value),placeholder:"0x...",className:"w-full bg-[var(--card2)] border border-[var(--card-boarder)] rounded-lg px-4 py-2.5 text-white placeholder-gray-500 focus:outline-none focus:ring-2 focus:ring-[var(--primary)] focus:border-transparent font-mono text-sm",required:!0})]}),t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium text-gray-300 mb-2",children:"Amount (ETH)"}),t.jsxs("div",{className:"flex gap-2",children:[t.jsx("input",{type:"number",step:"0.000001",min:"0",value:y,onChange:T=>P(T.target.value),placeholder:"0.0",className:"flex-1 bg-[var(--card2)] border border-[var(--card-boarder)] rounded-lg px-4 py-2.5 text-white placeholder-gray-500 focus:outline-none focus:ring-2 focus:ring-[var(--primary)] focus:border-transparent",required:!0}),t.jsx("button",{type:"button",onClick:D,className:"px-4 py-2.5 bg-[var(--card2)] border border-[var(--card-boarder)] rounded-lg text-gray-300 hover:bg-[var(--card-hover)] transition-colors text-sm font-medium",children:"Max"})]}),h&&t.jsxs("p",{className:"text-xs text-gray-500 mt-1",children:["Available: ",de(h.value.toString())," ",h.symbol]})]}),t.jsx("button",{type:"submit",disabled:x||!N||!y,className:"w-full bg-[var(--primary)] text-black py-3 px-4 rounded-lg font-semibold hover:bg-[var(--primary-hover)] transition-colors disabled:opacity-50 disabled:cursor-not-allowed flex items-center justify-center gap-2",children:x?t.jsxs(t.Fragment,{children:[t.jsxs("svg",{className:"animate-spin h-5 w-5",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",children:[t.jsx("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),t.jsx("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}),"Processing..."]}):"Withdraw"})]}),M&&t.jsxs("div",{className:"mt-4 p-4 bg-[var(--card2)] border border-[var(--card-boarder)] rounded-lg",children:[t.jsx("p",{className:"text-sm text-gray-400 mb-1",children:"Transaction Hash:"}),t.jsx("a",{href:F(M,i),target:"_blank",rel:"noopener noreferrer",className:"text-[var(--primary)] hover:underline font-mono text-sm break-all",children:M})]})]})]}),!se&&ae&&t.jsx("div",{className:"border-t border-[var(--card-boarder)] pt-6",children:t.jsx("p",{className:"text-sm text-gray-400 text-center",children:"Deposit and Withdraw are only available for embedded wallets. Please log in with email to use these features."})})]})})},jr=e=>{if(!e)return!1;const r=[".mp4",".mov",".webm",".ogg",".avi"],a=e.toLowerCase();return r.some(s=>a.includes(s))||a.includes("/video/")||a.includes("resource_type=video")},Nr=({tokenAddress:e,symbol:r,userAddress:a,chainId:s,tokenData:n,onClick:o})=>{var L,U;const u=je(),l=s||u,[i,h]=d.useState(null),[m,j]=d.useState(!1),[E,N]=d.useState((n==null?void 0:n.balance)||"0"),[C,y]=d.useState(n!=null&&n.graduationProgress?{graduationProgress:n.graduationProgress,percentage:0}:null);d.useEffect(()=>{if(n){N(n.balance||"0"),n.graduationProgress&&y({graduationProgress:n.graduationProgress,percentage:0});return}e&&(j(!0),At(e,1,1,l).then(p=>{p&&h(p)}).catch(p=>{console.warn(`Token ${e} not found in database:`,p)}).finally(()=>{j(!1)}))},[e,l,n]),d.useEffect(()=>{if(n!=null&&n.balance){N(n.balance);return}if(!e||!a||!l)return;(async()=>{try{const R=await Bt(e,a,l);N(R.tokenBalance)}catch(R){console.error("Error fetching user balance:",R)}})()},[e,a,l,n]),d.useEffect(()=>{var D;if(n!=null&&n.graduationProgress){y({graduationProgress:n.graduationProgress,percentage:0});return}if(i!=null&&i.graduationProgress&&i.graduationProgress!=="0"&&i.graduationProgress!==void 0){y({graduationProgress:i.graduationProgress,percentage:0});return}if(!!((D=i==null?void 0:i._count)!=null&&D.liquidityEvents)||!e||!l)return;(async()=>{try{const F=await _t(e,l);y(F)}catch(F){console.error("Error fetching graduation progress:",F)}})()},[e,l,i==null?void 0:i.graduationProgress,(L=i==null?void 0:i._count)==null?void 0:L.liquidityEvents,n]);const x=(p=>{var R;try{if((((R=i==null?void 0:i._count)==null?void 0:R.liquidityEvents)??0)>0)return 100;if(!p||p==="0")return 0;const F=Number(p)/1e18*100;return Math.min(Math.max(F,0),100)}catch(D){return console.error("Error calculating progress:",D),0}})(C==null?void 0:C.graduationProgress),S=(((U=i==null?void 0:i._count)==null?void 0:U.liquidityEvents)??0)>0,M=l?ke[l]:null;if(!E||E.toString()==="0")return null;const V=p=>{p.stopPropagation();const R=Re(l);window.open(`${R}/address/${e}`,"_blank")};return t.jsxs("div",{className:"bg-[var(--card)] rounded-lg p-4 cursor-pointer hover:bg-[var(--card-hover)] transition-colors duration-200 relative border border-[var(--card-boarder)] hover:border-[var(--primary)] group",onClick:o,children:[M&&t.jsx("div",{className:"absolute top-2 right-2 p-1 rounded-lg bg-[var(--card2)]/80 backdrop-blur-sm border border-[var(--card-boarder)] z-10",onClick:p=>p.stopPropagation(),children:t.jsx(M,{size:16,className:"rounded-full",variant:"branded"})}),i&&t.jsxs("div",{className:"absolute top-10 right-2 flex items-center gap-1.5",onClick:p=>p.stopPropagation(),children:[i.website&&t.jsx("a",{href:i.website,target:"_blank",rel:"noopener noreferrer",className:"p-1 rounded-lg text-[var(--text-secondary)] hover:text-[var(--primary)] hover:bg-[var(--card-hover)] border border-transparent hover:border-[var(--primary)] transition-all duration-300",children:t.jsx(Ot,{size:12})}),i.twitter&&t.jsx("a",{href:i.twitter,target:"_blank",rel:"noopener noreferrer",className:"p-1 rounded-lg text-[var(--text-secondary)] hover:text-[var(--primary)] hover:bg-[var(--card-hover)] border border-transparent hover:border-[var(--primary)] transition-all duration-300",onClick:p=>p.stopPropagation(),children:t.jsx($t,{size:12})}),i.telegram&&t.jsx("a",{href:i.telegram,target:"_blank",rel:"noopener noreferrer",className:"p-1 rounded-lg text-[var(--text-secondary)] hover:text-[var(--primary)] hover:bg-[var(--card-hover)] border border-transparent hover:border-[var(--primary)] transition-all duration-300",onClick:p=>p.stopPropagation(),children:t.jsx(yt,{size:12})}),i.discord&&t.jsx("a",{href:i.discord,target:"_blank",rel:"noopener noreferrer",className:"p-1 rounded-lg text-[var(--text-secondary)] hover:text-[var(--primary)] hover:bg-[var(--card-hover)] border border-transparent hover:border-[var(--primary)] transition-all duration-300",onClick:p=>p.stopPropagation(),children:t.jsx(Ut,{size:12})}),i.youtube&&t.jsx("a",{href:i.youtube,target:"_blank",rel:"noopener noreferrer",className:"p-1 rounded-lg text-[var(--text-secondary)] hover:text-[var(--primary)] hover:bg-[var(--card-hover)] border border-transparent hover:border-[var(--primary)] transition-all duration-300",onClick:p=>p.stopPropagation(),children:t.jsx(Ft,{size:12})})]}),t.jsxs("div",{className:"flex items-center gap-3 mb-3",children:[t.jsx("div",{className:"w-12 h-12 flex-shrink-0 rounded-lg overflow-hidden border border-[var(--card-boarder)] group-hover:border-[var(--primary)] transition-all duration-300",children:m?t.jsx("div",{className:"w-full h-full bg-[var(--card2)] flex items-center justify-center",children:t.jsxs("svg",{className:"animate-spin h-5 w-5 text-[var(--primary)]",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",children:[t.jsx("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),t.jsx("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]})}):i!=null&&i.logo?jr(i.logo)?t.jsx("video",{src:i.logo,className:"w-full h-full object-cover",muted:!0,loop:!0,playsInline:!0,autoPlay:!0}):t.jsx("img",{src:i.logo,alt:i.name||r,className:"w-full h-full object-cover",onError:p=>{p.target.src="/chats/noimg.svg"}}):t.jsx("img",{src:"/chats/noimg.svg",alt:r,className:"w-full h-full object-cover"})}),t.jsxs("div",{className:"flex-grow min-w-0",children:[t.jsx("h3",{className:"text-sm font-semibold text-white mb-1 truncate",children:(i==null?void 0:i.name)||r}),t.jsx("p",{className:"text-xs text-[var(--text-secondary)]",children:r})]})]}),t.jsxs("div",{className:"mb-3",children:[t.jsx("p",{className:"text-xs text-[var(--text-secondary)] mb-1",children:"Balance"}),t.jsx("p",{className:"text-sm font-semibold text-white",children:de(E)})]}),t.jsxs("div",{className:"mb-3",children:[t.jsxs("div",{className:"flex justify-between text-xs mb-1",children:[t.jsx("span",{className:"text-[var(--text-secondary)]",children:"Progress to DEX"}),t.jsx("span",{className:`font-semibold ${S?"gradient-text-cyan":"text-white"}`,children:S?"Completed":`${x.toFixed(1)}%`})]}),t.jsx("div",{className:"w-full bg-[var(--card-boarder)] rounded-full h-1.5 overflow-hidden",children:t.jsx("div",{className:"h-1.5 rounded-full transition-all duration-500 bg-gradient-to-r from-[var(--primary)] to-[var(--accent-purple)] shadow-[0_0_8px_rgba(0,243,255,0.4)]",style:{width:`${x}%`}})})]}),t.jsx("div",{className:"pt-2 border-t border-[var(--card-boarder)]",children:t.jsxs("p",{className:"text-[10px] text-[var(--text-secondary)]",children:["Address:",t.jsx("span",{className:"text-[var(--primary)] hover:underline ml-1 cursor-pointer font-mono",onClick:V,children:xe(e)})]})})]})},Cr=({currentPage:e,totalPages:r,onPageChange:a})=>t.jsxs("div",{className:"flex justify-center items-center space-x-2 mt-6",children:[t.jsx("button",{onClick:()=>a(e-1),disabled:e===1,className:"p-2 rounded-md bg-[var(--card)] text-gray-400 hover:bg-[var(--card-hover)] disabled:opacity-50 disabled:cursor-not-allowed",children:t.jsx(zt,{className:"h-4 w-4 sm:h-5 sm:w-5"})}),t.jsx("div",{className:"flex items-center space-x-1",children:[...Array(r)].map((s,n)=>{const o=n+1;return o===1||o===r||o>=e-1&&o<=e+1?t.jsx("button",{onClick:()=>a(o),className:`px-3 py-1 rounded-md text-sm transition-colors duration-200 ${e===o?"bg-[var(--primary)] text-black":"bg-[var(--card)] text-gray-400 hover:bg-[var(--card-hover)]"}`,children:o},o):o===e-2||o===e+2?t.jsx("span",{className:"text-gray-500 text-xs sm:text-sm",children:"..."},o):null})}),t.jsx("button",{onClick:()=>a(e+1),disabled:e===r,className:"p-2 rounded-md bg-[var(--card)] text-gray-400 hover:bg-[var(--card-hover)] disabled:opacity-50 disabled:cursor-not-allowed",children:t.jsx(Ht,{className:"h-4 w-4 sm:h-5 sm:w-5"})})]}),ce=({title:e,isActive:r,onClick:a})=>t.jsx("button",{className:`w-full text-left rounded-lg py-3 px-4 text-sm font-medium leading-5 transition-colors ${r?"bg-[var(--card-boarder)] text-white":"text-gray-400 hover:bg-[var(--card-hover)] hover:text-white"}`,onClick:a,children:e}),Dr=()=>{var Le;const e=mt(),{address:r}=we(),{address:a}=ft(),[s,n]=d.useState([]),[o,u]=d.useState(1),[l,i]=d.useState(1),[h,m]=d.useState(!1),[j,E]=d.useState([]),[N,C]=d.useState(!1),[y,P]=d.useState(null),[x,S]=d.useState("profile"),[M,V]=d.useState(null),[L,U]=d.useState(1),[p,R]=d.useState(!1),[D,F]=d.useState(null),[ae,se]=d.useState(!1),[J,T]=d.useState(""),[k,z]=d.useState(""),[g,A]=d.useState(!1),[ee,Te]=d.useState(!1),{user:X,refreshUser:Ye}=Se(),v=a||r||(X==null?void 0:X.address)||"",ne=je(),W=(r==null?void 0:r.toLowerCase())===v.toLowerCase()||((Le=X==null?void 0:X.address)==null?void 0:Le.toLowerCase())===v.toLowerCase()||!a&&(r||(X==null?void 0:X.address)),he=d.useCallback(async(c,f)=>{m(!0);try{const w=await Ct(c,f);n(w.transactions),i(w.totalPages)}catch{n([])}finally{m(!1)}},[]),ye=d.useCallback(async c=>{if(c){C(!0),P(null);try{const f=await Tt(c);E(f||[])}catch(f){console.error("Error fetching tokens:",f),P((f==null?void 0:f.message)||"Failed to load tokens"),E([])}finally{C(!1)}}},[]),oe=d.useCallback(async(c,f)=>{R(!0);try{const w=await Et(c,f,20);V(w)}catch(w){console.error("Error fetching created tokens:",w),V({data:[],totalCount:0,currentPage:1,totalPages:1,tokens:[],fullList:!1})}finally{R(!1)}},[]),Ee=d.useCallback(async c=>{Te(!0);try{const f=await Pt(c);T(f.username||""),z(f.bio||"")}catch(f){console.error("Error fetching user profile:",f),T(""),z("")}finally{Te(!1)}},[]),Je=async()=>{var w,Q;if(!v)return;if(!W){b.error("You can only edit your own profile");return}const c=J.trim();if(!c){b.error("Username is required");return}if(c.length<3){b.error("Username must be at least 3 characters");return}if(c.length>30){b.error("Username must be 30 characters or less");return}if(!/^[a-zA-Z0-9_-]+$/.test(c)){b.error("Username can only contain letters, numbers, underscores, and hyphens");return}A(!0);try{const te=await Lt({username:c,bio:k.trim()});T(te.username||c),z(te.bio||k.trim()),await Ye(),b.success("Profile updated successfully!")}catch(te){const ie=((Q=(w=te.response)==null?void 0:w.data)==null?void 0:Q.error)||te.message||"Failed to update profile";ie.toLowerCase().includes("username")&&(ie.toLowerCase().includes("taken")||ie.toLowerCase().includes("already"))?b.error("Username is already taken. Please choose another one."):b.error(ie)}finally{A(!1)}},Ze=d.useCallback(async()=>{v&&await oe(v,L)},[v,L,oe]);d.useEffect(()=>{!W&&(x==="wallet"||x==="transactions")&&S("profile")},[W,x]);const me=d.useRef(!0),Pe=d.useRef("");d.useEffect(()=>{v&&v!==Pe.current&&(Pe.current=v,me.current=!0,u(1),U(1),he(v,1),ye(v),oe(v,1),Ee(v),setTimeout(()=>{me.current=!1},100))},[v,he,ye,oe,Ee]),d.useEffect(()=>{v&&x==="transactions"&&!me.current&&o!==1&&he(v,o)},[v,o,x,he]),d.useEffect(()=>{v&&x==="created"&&!me.current&&L!==1&&oe(v,L)},[v,L,x,oe]);const qe=c=>{u(c)},et=c=>{if(!c||c===""||typeof c!="string")return"Unknown";try{const f=j.find(w=>{if(!w)return!1;const Q=(w==null?void 0:w.address)||(w==null?void 0:w.token_address);return!Q||typeof Q!="string"?!1:Q.toLowerCase()===c.toLowerCase()});return f&&f.symbol||"Unknown"}catch(f){return console.error("Error in getTokenSymbol:",f),"Unknown"}},tt=d.useCallback((c,f)=>`${Re(f||ne)}/tx/${c}`,[ne]),rt=c=>{try{const f=parseFloat(c);return isNaN(f)||f===0?"N/A":f<1e-6?f.toExponential(2):f<1?f.toFixed(6):f.toFixed(4)}catch{return"N/A"}},at=(c,f)=>{C(!0),e(`/token/${f||1}/${c}`),C(!1)},st=c=>{U(c)};return t.jsxs(vt,{children:[t.jsx(Rt,{title:`${v?`Profile: ${xe(v)}`:"Your Profile"} - BondX`,description:`View token holdings and transactions for ${v?xe(v):"your account"}.`,image:"seo/profile.jpg"}),t.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:[t.jsx("h1",{className:"text-xl sm:text-2xl font-bold text-white mb-6",children:v===r?"Your Profile":`Profile: ${xe(v)}`}),t.jsx("div",{className:"mb-8",children:t.jsxs("div",{className:"flex flex-col md:flex-row gap-4",children:[t.jsx("div",{className:"w-full md:w-64 flex-shrink-0",children:t.jsxs("div",{className:"bg-[var(--card2)] rounded-lg p-2 space-y-2",children:[t.jsx(ce,{title:"Profile",isActive:x==="profile",onClick:()=>S("profile")}),W&&t.jsx(ce,{title:"Wallet",isActive:x==="wallet",onClick:()=>S("wallet")}),t.jsx(ce,{title:"Tokens Held",isActive:x==="held",onClick:()=>S("held")}),t.jsx(ce,{title:"Tokens Created",isActive:x==="created",onClick:()=>S("created")}),W&&t.jsx(ce,{title:"Recent Transactions",isActive:x==="transactions",onClick:()=>S("transactions")})]})}),t.jsxs("div",{className:"flex-1",children:[x==="profile"&&t.jsx("div",{className:"bg-[var(--card)] rounded-lg p-6",children:ee?t.jsx("div",{className:"flex justify-center py-8",children:t.jsx(le,{size:"medium"})}):t.jsxs("div",{className:"space-y-6",children:[t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium text-gray-300 mb-2",children:"Username"}),t.jsx("input",{type:"text",value:J,onChange:c=>T(c.target.value),disabled:!W,className:"w-full bg-[var(--card2)] border border-[var(--card-boarder)] rounded-lg px-4 py-2.5 text-white placeholder-gray-500 focus:outline-none focus:ring-2 focus:ring-[var(--primary)] focus:border-transparent disabled:opacity-50 disabled:cursor-not-allowed",placeholder:"Enter username",maxLength:30}),t.jsxs("p",{className:"text-xs text-gray-500 mt-1",children:[J.length,"/30 â€¢ Must be 3-30 characters, letters, numbers, underscores, and hyphens only"]})]}),t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium text-gray-300 mb-2",children:"Bio"}),t.jsx("textarea",{value:k,onChange:c=>z(c.target.value),disabled:!W,className:"w-full bg-[var(--card2)] border border-[var(--card-boarder)] rounded-lg px-4 py-2.5 text-white placeholder-gray-500 focus:outline-none focus:ring-2 focus:ring-[var(--primary)] focus:border-transparent disabled:opacity-50 disabled:cursor-not-allowed resize-none",placeholder:"Tell us about yourself...",rows:4,maxLength:500}),t.jsxs("p",{className:"text-xs text-gray-500 mt-1",children:[k.length,"/500"]})]}),W&&t.jsx("button",{onClick:Je,disabled:g,className:"w-full bg-[var(--primary)] text-black py-3 px-4 rounded-lg font-semibold hover:bg-[var(--primary-hover)] transition-colors disabled:opacity-50 disabled:cursor-not-allowed flex items-center justify-center gap-2",children:g?t.jsxs(t.Fragment,{children:[t.jsxs("svg",{className:"animate-spin h-5 w-5",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",children:[t.jsx("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),t.jsx("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}),"Saving..."]}):"Save"})]})}),x==="wallet"&&W&&t.jsx(wr,{address:v,chainId:ne}),x==="held"&&t.jsx("div",{className:"bg-[var(--card)] rounded-lg p-6",children:N?t.jsx("div",{className:"flex justify-center py-8",children:t.jsx(le,{size:"medium"})}):y?t.jsxs("div",{className:"text-center py-8",children:[t.jsx("p",{className:"text-red-400 text-sm sm:text-base mb-4",children:y}),t.jsx("button",{onClick:()=>ye(v),className:"px-4 py-2 bg-[var(--primary)] text-black rounded-lg hover:bg-[var(--primary-hover)] transition-colors",children:"Retry"})]}):j.length>0?t.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-4",children:j.map(c=>t.jsx(Nr,{tokenAddress:(c==null?void 0:c.token_address)||c.address,symbol:c.symbol,userAddress:v,chainId:c.chainId||ne,tokenData:c,onClick:()=>at(c.address||c.token_address,c.chainId||ne)},c.address||c.token_address))}):t.jsx("p",{className:"text-gray-400 text-center text-sm sm:text-base",children:"No tokens held"})}),x==="created"&&t.jsx("div",{className:"bg-[var(--card)] rounded-lg p-6",children:p?t.jsx("div",{className:"flex justify-center py-8",children:t.jsx(le,{size:"medium"})}):M!=null&&M.data&&M.data.length>0?t.jsx(kt,{tokens:M.data,currentPage:L,totalPages:M.totalPages||1,onPageChange:st,isEnded:!1,sortType:"trending",itemsPerPage:20,isFullList:!1}):t.jsx("p",{className:"text-gray-400 text-center text-sm sm:text-base",children:"No tokens created"})}),x==="transactions"&&W&&t.jsx("div",{children:h?t.jsx("div",{className:"flex justify-center py-8",children:t.jsx(le,{size:"medium"})}):s&&s.length>0?t.jsxs(t.Fragment,{children:[t.jsx("div",{className:"overflow-x-auto bg-[var(--card)] rounded-lg",children:t.jsxs("table",{className:"min-w-full divide-y divide-[var(--card-boarder)]",children:[t.jsx("thead",{className:"bg-[var(--card2)]",children:t.jsxs("tr",{children:[t.jsx("th",{className:"px-3 py-3 text-left text-[10px] sm:text-xs font-medium text-gray-400 uppercase tracking-wider",children:"Chain"}),t.jsx("th",{className:"px-3 py-3 text-left text-[10px] sm:text-xs font-medium text-gray-400 uppercase tracking-wider",children:"Type"}),t.jsx("th",{className:"px-3 py-3 text-left text-[10px] sm:text-xs font-medium text-gray-400 uppercase tracking-wider",children:"Token"}),t.jsx("th",{className:"px-3 py-3 text-left text-[10px] sm:text-xs font-medium text-gray-400 uppercase tracking-wider",children:"Token Amount"}),t.jsx("th",{className:"px-3 py-3 text-left text-[10px] sm:text-xs font-medium text-gray-400 uppercase tracking-wider",children:"ETH Amount"}),t.jsx("th",{className:"px-3 py-3 text-left text-[10px] sm:text-xs font-medium text-gray-400 uppercase tracking-wider",children:"Price"}),t.jsx("th",{className:"px-3 py-3 text-left text-[10px] sm:text-xs font-medium text-gray-400 uppercase tracking-wider",children:"Date"}),t.jsx("th",{className:"px-3 py-3 text-left text-[10px] sm:text-xs font-medium text-gray-400 uppercase tracking-wider",children:"Tx Hash"})]})}),t.jsx("tbody",{className:"divide-y divide-[var(--card-boarder)]",children:s.map(c=>{const f=c.chainId||ne,w=f?ke[f]:null,Q=f?St[f]:"Unknown",te=c.type==="Bought",ie=tt(c.txHash,f);return t.jsxs("tr",{className:"hover:bg-[var(--card-hover)] transition-colors duration-150",children:[t.jsx("td",{className:"px-3 py-3 whitespace-nowrap",children:w?t.jsxs("div",{className:"flex items-center gap-2",children:[t.jsx(w,{size:16,className:"rounded-full",variant:"branded"}),t.jsx("span",{className:"text-[10px] sm:text-xs text-gray-400 hidden sm:inline",children:Q})]}):t.jsx("span",{className:"text-[10px] sm:text-xs text-gray-400",children:Q})}),t.jsx("td",{className:"px-3 py-3 whitespace-nowrap",children:t.jsx("span",{className:`text-[10px] sm:text-xs font-semibold ${te?"text-green-400":"text-red-400"}`,children:c.type})}),t.jsx("td",{className:"px-3 py-3 whitespace-nowrap text-[10px] sm:text-xs text-gray-300",children:et((c==null?void 0:c.tokenAddress)||(c==null?void 0:c.recipientAddress)||"")}),t.jsx("td",{className:"px-3 py-3 whitespace-nowrap text-[10px] sm:text-xs text-gray-300",children:de(c.tokenAmount)}),t.jsxs("td",{className:"px-3 py-3 whitespace-nowrap text-[10px] sm:text-xs text-gray-300",children:[de(c.ethAmount)," ETH"]}),t.jsx("td",{className:"px-3 py-3 whitespace-nowrap text-[10px] sm:text-xs text-gray-300",children:rt(c.tokenPrice)}),t.jsx("td",{className:"px-3 py-3 whitespace-nowrap text-[10px] sm:text-xs text-gray-300",children:bt(c.blockTimestamp||c.updatedAt)}),t.jsx("td",{className:"px-3 py-3 whitespace-nowrap",children:t.jsxs("a",{href:ie,target:"_blank",rel:"noopener noreferrer",className:"text-[10px] sm:text-xs text-[var(--primary)] hover:underline flex items-center gap-1 font-mono",onClick:nt=>nt.stopPropagation(),children:[c.txHash.slice(0,8),"...",t.jsx(Dt,{className:"w-3 h-3 inline"})]})})]},c.id)})})]})}),l>1&&t.jsx(Cr,{currentPage:o,totalPages:l,onPageChange:qe})]}):t.jsx("p",{className:"text-gray-400 bg-[var(--card)] rounded-lg p-4 text-center",children:"No recent transactions."})})]})]})})]}),N&&t.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:t.jsx(le,{size:"large"})}),D&&t.jsx(Qt,{token:D,isOpen:ae,onClose:()=>{se(!1),F(null)},onUpdate:Ze})]})};export{Dr as default};
