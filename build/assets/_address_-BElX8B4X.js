import{u as Oe,g as Nr,j as r,b as Ue,h as Cr,i as Tr,k as Er,l as Pr,n as Ar,o as Qe,p as Lr}from"./web3-vendor-DEvLGMBw.js";import{r as l,u as Sr,e as Br}from"./react-vendor-BTPJ9MfQ.js";import{s as _r,e as Ie,f as ie,g as kr,h as Rr,L as Mr,b as Ae,a as Ir,S as Or}from"./Layout-BV08fSdX.js";import{b as je,c as De,e as Ur,u as Dr,g as $r,h as Fr,a as zr,f as Hr}from"./tokens-B86zubp0.js";import{g as Wr,F as Qr,a as Gr}from"./ChevronRightIcon-CvCWu8BE.js";import{g as Vr}from"./holders-BjZPDCdD.js";import{B as T,u as Ve,a as Kr,e as Ke,d as Xe,f as Xr}from"./index-BkRxUkoc.js";import{S as Yr}from"./SEO-B8zD07Wz.js";import{L as we,T as Jr}from"./TokenList-DvfalpuV.js";import{F as Ye}from"./CloudArrowUpIcon-DE7L2IEJ.js";import{u as Zr}from"./useEmbeddedWallet-h7hbvN2p.js";import{E as qr}from"./external-link-DoH0B4X-.js";import{G as et,T as rt,M as tt,Y as st}from"./youtube-J-aT314S.js";function at({title:e,titleId:t,...a},s){return l.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:s,"aria-labelledby":t},a),e?l.createElement("title",{id:t},e):null,l.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"m2.25 15.75 5.159-5.159a2.25 2.25 0 0 1 3.182 0l5.159 5.159m-1.5-1.5 1.409-1.409a2.25 2.25 0 0 1 3.182 0l2.909 2.909m-18 3.75h16.5a1.5 1.5 0 0 0 1.5-1.5V6a1.5 1.5 0 0 0-1.5-1.5H3.75A1.5 1.5 0 0 0 2.25 6v12a1.5 1.5 0 0 0 1.5 1.5Zm10.5-11.25h.008v.008h-.008V8.25Zm.375 0a.375.375 0 1 1-.75 0 .375.375 0 0 1 .75 0Z"}))}const ot=l.forwardRef(at);async function nt(e){try{return(await je.get(`/api/users/${e}`)).data}catch(t){throw console.error("Error fetching user profile:",t),new Error("Failed to fetch user profile")}}async function it(e){var t,a;try{const s=localStorage.getItem("auth_token");return(await je.patch("/api/users/profile",e,{headers:{Authorization:`Bearer ${s}`}})).data}catch(s){console.error("Error updating user profile:",s);const o=De.isAxiosError(s)&&((a=(t=s.response)==null?void 0:t.data)==null?void 0:a.error)||"Failed to update user profile";throw new Error(o)}}async function lt(e){var s,o,n;const t=new FormData;if(t.append("file",e),!localStorage.getItem("auth_token"))throw new Error("Authentication required. Please log in to upload avatar.");try{return(await je.post("/api/upload/avatar",t)).data}catch(d){if(De.isAxiosError(d)){if(d.response){const c=((s=d.response.data)==null?void 0:s.error)||((o=d.response.data)==null?void 0:o.message)||((n=d.response.data)==null?void 0:n.details)||"Failed to upload avatar";throw new Error(c)}else if(d.request)throw new Error("Network error. Please check your connection and try again.")}throw new Error(d instanceof Error?d.message:"Failed to upload avatar")}}async function ct(e,t,a){var s,o;try{return(await je.post("/api/wallet/withdraw",{toAddress:e,amount:t,chainId:a})).data}catch(n){console.error("Error withdrawing from embedded wallet:",n);const d=De.isAxiosError(n)&&((o=(s=n.response)==null?void 0:s.data)==null?void 0:o.error)||"Failed to withdraw funds";throw new Error(d)}}async function dt(e,t=1,a=10,s,o){try{const n={page:t,pageSize:a};return s&&(n.chainId=s),(await je.get(`/api/activities/${e}`,{params:n})).data}catch(n){throw console.error("Error fetching activities:",n),new Error("Failed to fetch activities")}}const ut=({onAuthSuccess:e})=>{const{address:t}=Oe(),{signMessageAsync:a}=Nr(),[s,o]=l.useState(!1),n=async()=>{try{o(!0);const d=await fetch("/api/auth/nonce"),{nonce:c}=await d.json(),i=new _r.SiweMessage({domain:window.location.host,address:t,statement:"Sign in to post a message",uri:window.location.origin,version:"1",chainId:"84532",nonce:c}),g=i.prepareMessage(),m=await a({message:g});if(!(await fetch("/api/auth/verify",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({message:i,signature:m})})).ok)throw new Error("Error verifying message");e(),T.success("Successfully signed in!",{position:"top-right",hideProgressBar:!1,closeOnClick:!0,pauseOnHover:!0,draggable:!0})}catch{T.error("Failed to sign. try again.",{position:"top-right",hideProgressBar:!1,closeOnClick:!0,pauseOnHover:!0,draggable:!0})}finally{o(!1)}};return t?r.jsx("div",{className:"flex flex-col items-center",children:r.jsx("button",{onClick:n,disabled:s,className:"bg-blue-500 text-white text-xs sm:text-sm px-4 py-2 rounded-full hover:bg-blue-600 transition-colors duration-300 shadow-md focus:outline-none focus:ring-2 focus:ring-blue-400 focus:ring-opacity-50",children:s?r.jsxs("span",{className:"flex items-center",children:[r.jsxs("svg",{className:"animate-spin -ml-1 mr-2 h-4 w-4 text-white",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",children:[r.jsx("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),r.jsx("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}),"Verifying..."]}):"Verify Wallet"})}):null},ht=({token:e,isOpen:t,onClose:a,onUpdate:s})=>{const[o,n]=l.useState(!1),[d,c]=l.useState(!1),[i,g]=l.useState((e==null?void 0:e.description)||""),[m,w]=l.useState((e==null?void 0:e.twitter)||""),[P,B]=l.useState((e==null?void 0:e.telegram)||""),[A,E]=l.useState((e==null?void 0:e.website)||""),[_,v]=l.useState((e==null?void 0:e.discord)||""),[k,b]=l.useState(null),[R,y]=l.useState(!1),U=l.useRef(null),[f,L]=l.useState(0);l.useEffect(()=>{const p=[e.twitter,e.telegram,e.discord,e.website].filter(Boolean);L(p.length)},[e]);const D=!e.logo||!e.description||f<3;l.useEffect(()=>{V()},[]);const V=async()=>{var p;try{const W=await(await fetch("/api/auth/user")).json();c(W.authenticated&&((p=W.address)==null?void 0:p.toLowerCase())===e.creatorAddress.toLowerCase())}catch(S){console.error("Error checking authentication:",S),c(!1)}},fe=p=>{p.preventDefault(),y(!0)},ue=p=>{p.preventDefault(),y(!1)},M=async p=>{p.preventDefault(),y(!1);const S=p.dataTransfer.files[0];await $(S)},K=async p=>{var W;const S=(W=p.target.files)==null?void 0:W[0];S&&await $(S)},$=async p=>{if(p.size>1024*1024){T.error("File size should be less than 1MB");return}n(!0);try{const S=await Dr(p);b(S.url),T.success("Image uploaded successfully!")}catch(S){console.error("Error uploading image:",S),T.error("Failed to upload image. Please try again.")}finally{n(!1)}},te=async p=>{if(p.preventDefault(),!d){T.error("Please verify your wallet first");return}n(!0);try{const S=await Ur(e.address,{logo:k||e.logo,description:i||e.description,twitter:m||e.twitter,telegram:P||e.telegram,website:A||e.website,discord:_||e.discord});T.success("Token information updated successfully!"),s(S),a()}catch(S){console.error("Error updating token:",S),T.error("Failed to update token information. Please try again.")}finally{n(!1)}};return t?D?r.jsx("div",{className:"fixed inset-0 bg-black/80 flex items-center justify-center p-4 z-50",children:r.jsxs("div",{className:"bg-[#111111] rounded-xl w-full max-w-sm mx-auto p-4",children:[r.jsxs("div",{className:"flex justify-between items-center mb-4",children:[r.jsx("h2",{className:"text-lg font-semibold text-white",children:"Update Token Information"}),r.jsx("button",{onClick:a,className:"text-gray-400 hover:text-white transition-colors duration-200",children:r.jsx(Ie,{className:"h-5 w-5"})})]}),d?r.jsxs("form",{onSubmit:te,children:[r.jsxs("div",{className:"space-y-3",children:[!e.logo&&r.jsxs(r.Fragment,{children:[r.jsxs("div",{className:`border border-dashed rounded-lg p-3 text-center cursor-pointer ${R?"border-blue-500 bg-[var(--card2)]":"border-gray-600"}`,onDragOver:fe,onDragLeave:ue,onDrop:M,onClick:()=>{var p;return(p=U.current)==null?void 0:p.click()},children:[r.jsx("input",{type:"file",ref:U,className:"hidden",accept:"image/*",onChange:K}),r.jsx(Ye,{className:"mx-auto h-8 w-8 text-gray-400"}),r.jsx("p",{className:"mt-2 text-xs text-gray-400",children:"Drag and drop an image here, or click to select"}),r.jsx("p",{className:"text-xs text-gray-500",children:"Max file size: 1MB"})]}),k&&r.jsx("div",{className:"mt-3",children:r.jsx("img",{src:k,alt:"Token Logo",className:"w-16 h-16 mx-auto rounded-full"})})]}),!e.description&&r.jsxs("div",{children:[r.jsx("label",{className:"block text-xs font-medium text-gray-400 mb-1",children:"Description"}),r.jsx("textarea",{value:i,onChange:p=>g(p.target.value),className:"w-full bg-[var(--card2)] text-white text-sm rounded-lg border-gray-700 focus:border-blue-500 focus:ring-1 focus:ring-blue-500 shadow-sm resize-none",rows:3,placeholder:"Enter your token's description..."})]}),!e.twitter&&r.jsxs("div",{children:[r.jsx("label",{className:"block text-xs font-medium text-gray-400 mb-1",children:"Twitter"}),r.jsx("input",{type:"text",value:m,onChange:p=>w(p.target.value),className:"w-full bg-[var(--card2)] text-white text-sm h-9 rounded-lg border-gray-700 focus:border-blue-500 focus:ring-1 focus:ring-blue-500 shadow-sm",placeholder:"https://twitter.com/username"})]}),!e.telegram&&r.jsxs("div",{children:[r.jsx("label",{className:"block text-xs font-medium text-gray-400 mb-1",children:"Telegram"}),r.jsx("input",{type:"text",value:P,onChange:p=>B(p.target.value),className:"w-full bg-[var(--card2)] text-white text-sm h-9 rounded-lg border-gray-700 focus:border-blue-500 focus:ring-1 focus:ring-blue-500 shadow-sm",placeholder:"https://t.me/username"})]}),!e.website&&r.jsxs("div",{children:[r.jsx("label",{className:"block text-xs font-medium text-gray-400 mb-1",children:"Website"}),r.jsx("input",{type:"text",value:A,onChange:p=>E(p.target.value),className:"w-full bg-[var(--card2)] text-white text-sm h-9 rounded-lg border-gray-700 focus:border-blue-500 focus:ring-1 focus:ring-blue-500 shadow-sm",placeholder:"https://example.com"})]}),!e.discord&&r.jsxs("div",{children:[r.jsx("label",{className:"block text-xs font-medium text-gray-400 mb-1",children:"Discord"}),r.jsx("input",{type:"text",value:_,onChange:p=>v(p.target.value),className:"w-full bg-[var(--card2)] text-white text-sm h-9 rounded-lg border-gray-700 focus:border-blue-500 focus:ring-1 focus:ring-blue-500 shadow-sm",placeholder:"https://discord.gg/invite"})]})]}),r.jsxs("div",{className:"mt-4 flex justify-end space-x-3",children:[r.jsx("button",{type:"button",onClick:a,className:"px-3 py-1.5 text-xs text-gray-400 hover:text-white transition-colors duration-200",children:"Cancel"}),r.jsx("button",{type:"submit",disabled:o,className:"px-3 py-1.5 text-xs bg-blue-500 text-white rounded-lg hover:bg-blue-600 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:ring-offset-2 focus:ring-offset-[#111111] disabled:opacity-50 disabled:cursor-not-allowed transition-colors duration-200",children:o?"Updating...":"Update"})]})]}):r.jsxs("div",{className:"text-center",children:[r.jsx("p",{className:"mb-4 text-gray-400 text-sm",children:"Please verify your wallet to update token information"}),r.jsx(ut,{onAuthSuccess:()=>{c(!0),T.success("Wallet verified successfully!")}})]})]})}):r.jsx("div",{className:"fixed inset-0 bg-black/80 flex items-center justify-center p-4 z-50",children:r.jsxs("div",{className:"bg-[#111111] rounded-xl w-full max-w-sm mx-auto p-4",children:[r.jsxs("div",{className:"flex justify-between items-center mb-4",children:[r.jsx("h2",{className:"text-lg font-semibold text-white",children:"Token Information Complete"}),r.jsx("button",{onClick:a,className:"text-gray-400 hover:text-white transition-colors duration-200",children:r.jsx(Ie,{className:"h-5 w-5"})})]}),r.jsx("p",{className:"text-gray-400 text-sm mb-4",children:"This token has all required information (logo, description, and social links). No further updates are needed."}),r.jsx("div",{className:"flex justify-end",children:r.jsx("button",{onClick:a,className:"px-3 py-1.5 text-xs bg-blue-500 text-white rounded-lg hover:bg-blue-600 transition-colors duration-200",children:"Close"})})]})}):null};var Se={},Je={exports:{}},mt="SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED",gt=mt,ft=gt;function Ze(){}function qe(){}qe.resetWarningCache=Ze;var xt=function(){function e(s,o,n,d,c,i){if(i!==ft){var g=new Error("Calling PropTypes validators directly is not supported by the `prop-types` package. Use PropTypes.checkPropTypes() to call them. Read more at http://fb.me/use-check-prop-types");throw g.name="Invariant Violation",g}}e.isRequired=e;function t(){return e}var a={array:e,bigint:e,bool:e,func:e,number:e,object:e,string:e,symbol:e,any:e,arrayOf:t,element:e,elementType:e,instanceOf:t,node:e,objectOf:t,oneOf:t,oneOfType:t,shape:t,exact:t,checkPropTypes:qe,resetWarningCache:Ze};return a.PropTypes=a,a};Je.exports=xt();var er=Je.exports,rr={L:1,M:0,Q:3,H:2},tr={MODE_NUMBER:1,MODE_ALPHA_NUM:2,MODE_8BIT_BYTE:4,MODE_KANJI:8},pt=tr;function sr(e){this.mode=pt.MODE_8BIT_BYTE,this.data=e}sr.prototype={getLength:function(e){return this.data.length},write:function(e){for(var t=0;t<this.data.length;t++)e.put(this.data.charCodeAt(t),8)}};var vt=sr,Ee=rr;function ee(e,t){this.totalCount=e,this.dataCount=t}ee.RS_BLOCK_TABLE=[[1,26,19],[1,26,16],[1,26,13],[1,26,9],[1,44,34],[1,44,28],[1,44,22],[1,44,16],[1,70,55],[1,70,44],[2,35,17],[2,35,13],[1,100,80],[2,50,32],[2,50,24],[4,25,9],[1,134,108],[2,67,43],[2,33,15,2,34,16],[2,33,11,2,34,12],[2,86,68],[4,43,27],[4,43,19],[4,43,15],[2,98,78],[4,49,31],[2,32,14,4,33,15],[4,39,13,1,40,14],[2,121,97],[2,60,38,2,61,39],[4,40,18,2,41,19],[4,40,14,2,41,15],[2,146,116],[3,58,36,2,59,37],[4,36,16,4,37,17],[4,36,12,4,37,13],[2,86,68,2,87,69],[4,69,43,1,70,44],[6,43,19,2,44,20],[6,43,15,2,44,16],[4,101,81],[1,80,50,4,81,51],[4,50,22,4,51,23],[3,36,12,8,37,13],[2,116,92,2,117,93],[6,58,36,2,59,37],[4,46,20,6,47,21],[7,42,14,4,43,15],[4,133,107],[8,59,37,1,60,38],[8,44,20,4,45,21],[12,33,11,4,34,12],[3,145,115,1,146,116],[4,64,40,5,65,41],[11,36,16,5,37,17],[11,36,12,5,37,13],[5,109,87,1,110,88],[5,65,41,5,66,42],[5,54,24,7,55,25],[11,36,12],[5,122,98,1,123,99],[7,73,45,3,74,46],[15,43,19,2,44,20],[3,45,15,13,46,16],[1,135,107,5,136,108],[10,74,46,1,75,47],[1,50,22,15,51,23],[2,42,14,17,43,15],[5,150,120,1,151,121],[9,69,43,4,70,44],[17,50,22,1,51,23],[2,42,14,19,43,15],[3,141,113,4,142,114],[3,70,44,11,71,45],[17,47,21,4,48,22],[9,39,13,16,40,14],[3,135,107,5,136,108],[3,67,41,13,68,42],[15,54,24,5,55,25],[15,43,15,10,44,16],[4,144,116,4,145,117],[17,68,42],[17,50,22,6,51,23],[19,46,16,6,47,17],[2,139,111,7,140,112],[17,74,46],[7,54,24,16,55,25],[34,37,13],[4,151,121,5,152,122],[4,75,47,14,76,48],[11,54,24,14,55,25],[16,45,15,14,46,16],[6,147,117,4,148,118],[6,73,45,14,74,46],[11,54,24,16,55,25],[30,46,16,2,47,17],[8,132,106,4,133,107],[8,75,47,13,76,48],[7,54,24,22,55,25],[22,45,15,13,46,16],[10,142,114,2,143,115],[19,74,46,4,75,47],[28,50,22,6,51,23],[33,46,16,4,47,17],[8,152,122,4,153,123],[22,73,45,3,74,46],[8,53,23,26,54,24],[12,45,15,28,46,16],[3,147,117,10,148,118],[3,73,45,23,74,46],[4,54,24,31,55,25],[11,45,15,31,46,16],[7,146,116,7,147,117],[21,73,45,7,74,46],[1,53,23,37,54,24],[19,45,15,26,46,16],[5,145,115,10,146,116],[19,75,47,10,76,48],[15,54,24,25,55,25],[23,45,15,25,46,16],[13,145,115,3,146,116],[2,74,46,29,75,47],[42,54,24,1,55,25],[23,45,15,28,46,16],[17,145,115],[10,74,46,23,75,47],[10,54,24,35,55,25],[19,45,15,35,46,16],[17,145,115,1,146,116],[14,74,46,21,75,47],[29,54,24,19,55,25],[11,45,15,46,46,16],[13,145,115,6,146,116],[14,74,46,23,75,47],[44,54,24,7,55,25],[59,46,16,1,47,17],[12,151,121,7,152,122],[12,75,47,26,76,48],[39,54,24,14,55,25],[22,45,15,41,46,16],[6,151,121,14,152,122],[6,75,47,34,76,48],[46,54,24,10,55,25],[2,45,15,64,46,16],[17,152,122,4,153,123],[29,74,46,14,75,47],[49,54,24,10,55,25],[24,45,15,46,46,16],[4,152,122,18,153,123],[13,74,46,32,75,47],[48,54,24,14,55,25],[42,45,15,32,46,16],[20,147,117,4,148,118],[40,75,47,7,76,48],[43,54,24,22,55,25],[10,45,15,67,46,16],[19,148,118,6,149,119],[18,75,47,31,76,48],[34,54,24,34,55,25],[20,45,15,61,46,16]];ee.getRSBlocks=function(e,t){var a=ee.getRsBlockTable(e,t);if(a==null)throw new Error("bad rs block @ typeNumber:"+e+"/errorCorrectLevel:"+t);for(var s=a.length/3,o=new Array,n=0;n<s;n++)for(var d=a[n*3+0],c=a[n*3+1],i=a[n*3+2],g=0;g<d;g++)o.push(new ee(c,i));return o};ee.getRsBlockTable=function(e,t){switch(t){case Ee.L:return ee.RS_BLOCK_TABLE[(e-1)*4+0];case Ee.M:return ee.RS_BLOCK_TABLE[(e-1)*4+1];case Ee.Q:return ee.RS_BLOCK_TABLE[(e-1)*4+2];case Ee.H:return ee.RS_BLOCK_TABLE[(e-1)*4+3];default:return}};var bt=ee;function ar(){this.buffer=new Array,this.length=0}ar.prototype={get:function(e){var t=Math.floor(e/8);return(this.buffer[t]>>>7-e%8&1)==1},put:function(e,t){for(var a=0;a<t;a++)this.putBit((e>>>t-a-1&1)==1)},getLengthInBits:function(){return this.length},putBit:function(e){var t=Math.floor(this.length/8);this.buffer.length<=t&&this.buffer.push(0),e&&(this.buffer[t]|=128>>>this.length%8),this.length++}};var wt=ar,Y={glog:function(e){if(e<1)throw new Error("glog("+e+")");return Y.LOG_TABLE[e]},gexp:function(e){for(;e<0;)e+=255;for(;e>=256;)e-=255;return Y.EXP_TABLE[e]},EXP_TABLE:new Array(256),LOG_TABLE:new Array(256)};for(var O=0;O<8;O++)Y.EXP_TABLE[O]=1<<O;for(var O=8;O<256;O++)Y.EXP_TABLE[O]=Y.EXP_TABLE[O-4]^Y.EXP_TABLE[O-5]^Y.EXP_TABLE[O-6]^Y.EXP_TABLE[O-8];for(var O=0;O<255;O++)Y.LOG_TABLE[Y.EXP_TABLE[O]]=O;var or=Y,de=or;function Le(e,t){if(e.length==null)throw new Error(e.length+"/"+t);for(var a=0;a<e.length&&e[a]==0;)a++;this.num=new Array(e.length-a+t);for(var s=0;s<e.length-a;s++)this.num[s]=e[s+a]}Le.prototype={get:function(e){return this.num[e]},getLength:function(){return this.num.length},multiply:function(e){for(var t=new Array(this.getLength()+e.getLength()-1),a=0;a<this.getLength();a++)for(var s=0;s<e.getLength();s++)t[a+s]^=de.gexp(de.glog(this.get(a))+de.glog(e.get(s)));return new Le(t,0)},mod:function(e){if(this.getLength()-e.getLength()<0)return this;for(var t=de.glog(this.get(0))-de.glog(e.get(0)),a=new Array(this.getLength()),s=0;s<this.getLength();s++)a[s]=this.get(s);for(var s=0;s<e.getLength();s++)a[s]^=de.gexp(de.glog(e.get(s))+t);return new Le(a,0).mod(e)}};var nr=Le,Q=tr,Ge=nr,yt=or,ne={PATTERN000:0,PATTERN001:1,PATTERN010:2,PATTERN011:3,PATTERN100:4,PATTERN101:5,PATTERN110:6,PATTERN111:7},I={PATTERN_POSITION_TABLE:[[],[6,18],[6,22],[6,26],[6,30],[6,34],[6,22,38],[6,24,42],[6,26,46],[6,28,50],[6,30,54],[6,32,58],[6,34,62],[6,26,46,66],[6,26,48,70],[6,26,50,74],[6,30,54,78],[6,30,56,82],[6,30,58,86],[6,34,62,90],[6,28,50,72,94],[6,26,50,74,98],[6,30,54,78,102],[6,28,54,80,106],[6,32,58,84,110],[6,30,58,86,114],[6,34,62,90,118],[6,26,50,74,98,122],[6,30,54,78,102,126],[6,26,52,78,104,130],[6,30,56,82,108,134],[6,34,60,86,112,138],[6,30,58,86,114,142],[6,34,62,90,118,146],[6,30,54,78,102,126,150],[6,24,50,76,102,128,154],[6,28,54,80,106,132,158],[6,32,58,84,110,136,162],[6,26,54,82,110,138,166],[6,30,58,86,114,142,170]],G15:1335,G18:7973,G15_MASK:21522,getBCHTypeInfo:function(e){for(var t=e<<10;I.getBCHDigit(t)-I.getBCHDigit(I.G15)>=0;)t^=I.G15<<I.getBCHDigit(t)-I.getBCHDigit(I.G15);return(e<<10|t)^I.G15_MASK},getBCHTypeNumber:function(e){for(var t=e<<12;I.getBCHDigit(t)-I.getBCHDigit(I.G18)>=0;)t^=I.G18<<I.getBCHDigit(t)-I.getBCHDigit(I.G18);return e<<12|t},getBCHDigit:function(e){for(var t=0;e!=0;)t++,e>>>=1;return t},getPatternPosition:function(e){return I.PATTERN_POSITION_TABLE[e-1]},getMask:function(e,t,a){switch(e){case ne.PATTERN000:return(t+a)%2==0;case ne.PATTERN001:return t%2==0;case ne.PATTERN010:return a%3==0;case ne.PATTERN011:return(t+a)%3==0;case ne.PATTERN100:return(Math.floor(t/2)+Math.floor(a/3))%2==0;case ne.PATTERN101:return t*a%2+t*a%3==0;case ne.PATTERN110:return(t*a%2+t*a%3)%2==0;case ne.PATTERN111:return(t*a%3+(t+a)%2)%2==0;default:throw new Error("bad maskPattern:"+e)}},getErrorCorrectPolynomial:function(e){for(var t=new Ge([1],0),a=0;a<e;a++)t=t.multiply(new Ge([1,yt.gexp(a)],0));return t},getLengthInBits:function(e,t){if(1<=t&&t<10)switch(e){case Q.MODE_NUMBER:return 10;case Q.MODE_ALPHA_NUM:return 9;case Q.MODE_8BIT_BYTE:return 8;case Q.MODE_KANJI:return 8;default:throw new Error("mode:"+e)}else if(t<27)switch(e){case Q.MODE_NUMBER:return 12;case Q.MODE_ALPHA_NUM:return 11;case Q.MODE_8BIT_BYTE:return 16;case Q.MODE_KANJI:return 10;default:throw new Error("mode:"+e)}else if(t<41)switch(e){case Q.MODE_NUMBER:return 14;case Q.MODE_ALPHA_NUM:return 13;case Q.MODE_8BIT_BYTE:return 16;case Q.MODE_KANJI:return 12;default:throw new Error("mode:"+e)}else throw new Error("type:"+t)},getLostPoint:function(e){for(var t=e.getModuleCount(),a=0,s=0;s<t;s++)for(var o=0;o<t;o++){for(var n=0,d=e.isDark(s,o),c=-1;c<=1;c++)if(!(s+c<0||t<=s+c))for(var i=-1;i<=1;i++)o+i<0||t<=o+i||c==0&&i==0||d==e.isDark(s+c,o+i)&&n++;n>5&&(a+=3+n-5)}for(var s=0;s<t-1;s++)for(var o=0;o<t-1;o++){var g=0;e.isDark(s,o)&&g++,e.isDark(s+1,o)&&g++,e.isDark(s,o+1)&&g++,e.isDark(s+1,o+1)&&g++,(g==0||g==4)&&(a+=3)}for(var s=0;s<t;s++)for(var o=0;o<t-6;o++)e.isDark(s,o)&&!e.isDark(s,o+1)&&e.isDark(s,o+2)&&e.isDark(s,o+3)&&e.isDark(s,o+4)&&!e.isDark(s,o+5)&&e.isDark(s,o+6)&&(a+=40);for(var o=0;o<t;o++)for(var s=0;s<t-6;s++)e.isDark(s,o)&&!e.isDark(s+1,o)&&e.isDark(s+2,o)&&e.isDark(s+3,o)&&e.isDark(s+4,o)&&!e.isDark(s+5,o)&&e.isDark(s+6,o)&&(a+=40);for(var m=0,o=0;o<t;o++)for(var s=0;s<t;s++)e.isDark(s,o)&&m++;var w=Math.abs(100*m/t/t-50)/5;return a+=w*10,a}},jt=I,Nt=vt,ir=bt,lr=wt,le=jt,Ct=nr;function re(e,t){this.typeNumber=e,this.errorCorrectLevel=t,this.modules=null,this.moduleCount=0,this.dataCache=null,this.dataList=[]}var H=re.prototype;H.addData=function(e){var t=new Nt(e);this.dataList.push(t),this.dataCache=null};H.isDark=function(e,t){if(e<0||this.moduleCount<=e||t<0||this.moduleCount<=t)throw new Error(e+","+t);return this.modules[e][t]};H.getModuleCount=function(){return this.moduleCount};H.make=function(){if(this.typeNumber<1){var e=1;for(e=1;e<40;e++){for(var t=ir.getRSBlocks(e,this.errorCorrectLevel),a=new lr,s=0,o=0;o<t.length;o++)s+=t[o].dataCount;for(var o=0;o<this.dataList.length;o++){var n=this.dataList[o];a.put(n.mode,4),a.put(n.getLength(),le.getLengthInBits(n.mode,e)),n.write(a)}if(a.getLengthInBits()<=s*8)break}this.typeNumber=e}this.makeImpl(!1,this.getBestMaskPattern())};H.makeImpl=function(e,t){this.moduleCount=this.typeNumber*4+17,this.modules=new Array(this.moduleCount);for(var a=0;a<this.moduleCount;a++){this.modules[a]=new Array(this.moduleCount);for(var s=0;s<this.moduleCount;s++)this.modules[a][s]=null}this.setupPositionProbePattern(0,0),this.setupPositionProbePattern(this.moduleCount-7,0),this.setupPositionProbePattern(0,this.moduleCount-7),this.setupPositionAdjustPattern(),this.setupTimingPattern(),this.setupTypeInfo(e,t),this.typeNumber>=7&&this.setupTypeNumber(e),this.dataCache==null&&(this.dataCache=re.createData(this.typeNumber,this.errorCorrectLevel,this.dataList)),this.mapData(this.dataCache,t)};H.setupPositionProbePattern=function(e,t){for(var a=-1;a<=7;a++)if(!(e+a<=-1||this.moduleCount<=e+a))for(var s=-1;s<=7;s++)t+s<=-1||this.moduleCount<=t+s||(0<=a&&a<=6&&(s==0||s==6)||0<=s&&s<=6&&(a==0||a==6)||2<=a&&a<=4&&2<=s&&s<=4?this.modules[e+a][t+s]=!0:this.modules[e+a][t+s]=!1)};H.getBestMaskPattern=function(){for(var e=0,t=0,a=0;a<8;a++){this.makeImpl(!0,a);var s=le.getLostPoint(this);(a==0||e>s)&&(e=s,t=a)}return t};H.createMovieClip=function(e,t,a){var s=e.createEmptyMovieClip(t,a),o=1;this.make();for(var n=0;n<this.modules.length;n++)for(var d=n*o,c=0;c<this.modules[n].length;c++){var i=c*o,g=this.modules[n][c];g&&(s.beginFill(0,100),s.moveTo(i,d),s.lineTo(i+o,d),s.lineTo(i+o,d+o),s.lineTo(i,d+o),s.endFill())}return s};H.setupTimingPattern=function(){for(var e=8;e<this.moduleCount-8;e++)this.modules[e][6]==null&&(this.modules[e][6]=e%2==0);for(var t=8;t<this.moduleCount-8;t++)this.modules[6][t]==null&&(this.modules[6][t]=t%2==0)};H.setupPositionAdjustPattern=function(){for(var e=le.getPatternPosition(this.typeNumber),t=0;t<e.length;t++)for(var a=0;a<e.length;a++){var s=e[t],o=e[a];if(this.modules[s][o]==null)for(var n=-2;n<=2;n++)for(var d=-2;d<=2;d++)n==-2||n==2||d==-2||d==2||n==0&&d==0?this.modules[s+n][o+d]=!0:this.modules[s+n][o+d]=!1}};H.setupTypeNumber=function(e){for(var t=le.getBCHTypeNumber(this.typeNumber),a=0;a<18;a++){var s=!e&&(t>>a&1)==1;this.modules[Math.floor(a/3)][a%3+this.moduleCount-8-3]=s}for(var a=0;a<18;a++){var s=!e&&(t>>a&1)==1;this.modules[a%3+this.moduleCount-8-3][Math.floor(a/3)]=s}};H.setupTypeInfo=function(e,t){for(var a=this.errorCorrectLevel<<3|t,s=le.getBCHTypeInfo(a),o=0;o<15;o++){var n=!e&&(s>>o&1)==1;o<6?this.modules[o][8]=n:o<8?this.modules[o+1][8]=n:this.modules[this.moduleCount-15+o][8]=n}for(var o=0;o<15;o++){var n=!e&&(s>>o&1)==1;o<8?this.modules[8][this.moduleCount-o-1]=n:o<9?this.modules[8][15-o-1+1]=n:this.modules[8][15-o-1]=n}this.modules[this.moduleCount-8][8]=!e};H.mapData=function(e,t){for(var a=-1,s=this.moduleCount-1,o=7,n=0,d=this.moduleCount-1;d>0;d-=2)for(d==6&&d--;;){for(var c=0;c<2;c++)if(this.modules[s][d-c]==null){var i=!1;n<e.length&&(i=(e[n]>>>o&1)==1);var g=le.getMask(t,s,d-c);g&&(i=!i),this.modules[s][d-c]=i,o--,o==-1&&(n++,o=7)}if(s+=a,s<0||this.moduleCount<=s){s-=a,a=-a;break}}};re.PAD0=236;re.PAD1=17;re.createData=function(e,t,a){for(var s=ir.getRSBlocks(e,t),o=new lr,n=0;n<a.length;n++){var d=a[n];o.put(d.mode,4),o.put(d.getLength(),le.getLengthInBits(d.mode,e)),d.write(o)}for(var c=0,n=0;n<s.length;n++)c+=s[n].dataCount;if(o.getLengthInBits()>c*8)throw new Error("code length overflow. ("+o.getLengthInBits()+">"+c*8+")");for(o.getLengthInBits()+4<=c*8&&o.put(0,4);o.getLengthInBits()%8!=0;)o.putBit(!1);for(;!(o.getLengthInBits()>=c*8||(o.put(re.PAD0,8),o.getLengthInBits()>=c*8));)o.put(re.PAD1,8);return re.createBytes(o,s)};re.createBytes=function(e,t){for(var a=0,s=0,o=0,n=new Array(t.length),d=new Array(t.length),c=0;c<t.length;c++){var i=t[c].dataCount,g=t[c].totalCount-i;s=Math.max(s,i),o=Math.max(o,g),n[c]=new Array(i);for(var m=0;m<n[c].length;m++)n[c][m]=255&e.buffer[m+a];a+=i;var w=le.getErrorCorrectPolynomial(g),P=new Ct(n[c],w.getLength()-1),B=P.mod(w);d[c]=new Array(w.getLength()-1);for(var m=0;m<d[c].length;m++){var A=m+B.getLength()-d[c].length;d[c][m]=A>=0?B.get(A):0}}for(var E=0,m=0;m<t.length;m++)E+=t[m].totalCount;for(var _=new Array(E),v=0,m=0;m<s;m++)for(var c=0;c<t.length;c++)m<n[c].length&&(_[v++]=n[c][m]);for(var m=0;m<o;m++)for(var c=0;c<t.length;c++)m<d[c].length&&(_[v++]=d[c][m]);return _};var Tt=re,$e={};Object.defineProperty($e,"__esModule",{value:!0});var Et=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var s in a)Object.prototype.hasOwnProperty.call(a,s)&&(e[s]=a[s])}return e},Pt=er,G=dr(Pt),cr=l,Pe=dr(cr);function dr(e){return e&&e.__esModule?e:{default:e}}function At(e,t){var a={};for(var s in e)t.indexOf(s)>=0||Object.prototype.hasOwnProperty.call(e,s)&&(a[s]=e[s]);return a}var Lt={bgColor:G.default.oneOfType([G.default.object,G.default.string]).isRequired,bgD:G.default.string.isRequired,fgColor:G.default.oneOfType([G.default.object,G.default.string]).isRequired,fgD:G.default.string.isRequired,size:G.default.number.isRequired,title:G.default.string,viewBoxSize:G.default.number.isRequired,xmlns:G.default.string},Fe=(0,cr.forwardRef)(function(e,t){var a=e.bgColor,s=e.bgD,o=e.fgD,n=e.fgColor,d=e.size,c=e.title,i=e.viewBoxSize,g=e.xmlns,m=g===void 0?"http://www.w3.org/2000/svg":g,w=At(e,["bgColor","bgD","fgD","fgColor","size","title","viewBoxSize","xmlns"]);return Pe.default.createElement("svg",Et({},w,{height:d,ref:t,viewBox:"0 0 "+i+" "+i,width:d,xmlns:m}),c?Pe.default.createElement("title",null,c):null,Pe.default.createElement("path",{d:s,fill:a}),Pe.default.createElement("path",{d:o,fill:n}))});Fe.displayName="QRCodeSvg";Fe.propTypes=Lt;$e.default=Fe;Object.defineProperty(Se,"__esModule",{value:!0});Se.QRCode=void 0;var St=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var s in a)Object.prototype.hasOwnProperty.call(a,s)&&(e[s]=a[s])}return e},Bt=er,oe=Ne(Bt),_t=rr,kt=Ne(_t),Rt=Tt,Mt=Ne(Rt),ur=l,It=Ne(ur),Ot=$e,Ut=Ne(Ot);function Ne(e){return e&&e.__esModule?e:{default:e}}function Dt(e,t){var a={};for(var s in e)t.indexOf(s)>=0||Object.prototype.hasOwnProperty.call(e,s)&&(a[s]=e[s]);return a}var $t={bgColor:oe.default.oneOfType([oe.default.object,oe.default.string]),fgColor:oe.default.oneOfType([oe.default.object,oe.default.string]),level:oe.default.string,size:oe.default.number,value:oe.default.string.isRequired},Be=(0,ur.forwardRef)(function(e,t){var a=e.bgColor,s=a===void 0?"#FFFFFF":a,o=e.fgColor,n=o===void 0?"#000000":o,d=e.level,c=d===void 0?"L":d,i=e.size,g=i===void 0?256:i,m=e.value,w=Dt(e,["bgColor","fgColor","level","size","value"]),P=new Mt.default(-1,kt.default[c]);P.addData(m),P.make();var B=P.modules;return It.default.createElement(Ut.default,St({},w,{bgColor:s,bgD:B.map(function(A,E){return A.map(function(_,v){return _?"":"M "+v+" "+E+" l 1 0 0 1 -1 0 Z"}).join(" ")}).join(" "),fgColor:n,fgD:B.map(function(A,E){return A.map(function(_,v){return _?"M "+v+" "+E+" l 1 0 0 1 -1 0 Z":""}).join(" ")}).join(" "),ref:t,size:g,viewBoxSize:B.length}))});Se.QRCode=Be;Be.displayName="QRCode";Be.propTypes=$t;var Ft=Se.default=Be;const zt=({address:e,chainId:t})=>{var he;const{address:a}=Oe(),s=Ue(),{isEmbeddedWallet:o,walletAddress:n}=Zr(),{user:d,isAuthenticated:c}=Ve(),i=t||s,{subscribeToDepositDetected:g,subscribeToBalanceUpdate:m}=Kr(),{data:w,refetch:P}=Cr({address:e||void 0,query:{enabled:!!e,refetchInterval:h=>h.state.dataUpdatedAt&&Date.now()-h.state.dataUpdatedAt>12e4?3e4:5e3,refetchIntervalInBackground:!1}}),[B,A]=l.useState(!1),[E,_]=l.useState(""),[v,k]=l.useState(""),[b,R]=l.useState(!1),[y,U]=l.useState(null),[f,L]=l.useState("deposit"),[D,V]=l.useState([]),[fe,ue]=l.useState(!1),[M,K]=l.useState(1),[$,te]=l.useState(1),p=async()=>{if(e)try{await navigator.clipboard.writeText(e),A(!0),setTimeout(()=>A(!1),2e3)}catch{T.error("Failed to copy address")}},S=async h=>{if(h.preventDefault(),!e||!E||!v){T.error("Please fill in all fields");return}if(!o||!c){T.error("Withdraw is only available for embedded wallets. Please log in.");return}if(!/^0x[a-fA-F0-9]{40}$/i.test(E)){T.error("Invalid recipient address format");return}const N=parseFloat(v);if(isNaN(N)||N<=0){T.error("Please enter a valid amount");return}if(w&&parseFloat(Qe(w.value,18))<N){T.error("Insufficient balance");return}R(!0),U(null);try{const Z=Lr(v,18),ce=await ct(E,Z.toString(),i);U(ce.txHash),_(""),k(""),P()}catch(Z){T.error(Z.message||"Failed to withdraw funds")}finally{R(!1)}},W=()=>{if(w){const h=parseFloat(Qe(w.value,18)),N=Math.max(0,h-.001);k(N>0?N.toFixed(6):"0")}},xe=l.useCallback((h,N)=>({[Ar.id]:`https://etherscan.io/tx/${h}`,[Pr.id]:`https://basescan.org/tx/${h}`,[Er.id]:`https://sepolia.basescan.org/tx/${h}`,[Tr.id]:`https://arbiscan.io/tx/${h}`})[N]||`https://etherscan.io/tx/${h}`,[]),pe=l.useCallback(async()=>{if(e){ue(!0);try{const h=await dt(e,M,10,i);V(h.activities||h.data||[]),te(h.totalPages||1)}catch(h){console.error("Error fetching activities:",h),T.error("Failed to load activity history")}finally{ue(!1)}}},[e,M,i]);l.useEffect(()=>{if(!e||!i)return;const h=g(N=>{if(!(!N.walletAddress||!e)&&N.walletAddress.toLowerCase()===e.toLowerCase()&&N.chainId===i){P();const ce=N.type==="withdraw"?`Withdrawal detected: ${ie(N.amount)} ETH`:`Deposit detected: ${ie(N.amount)} ETH`;T.success(ce,{autoClose:5e3})}});return()=>{h()}},[e,i,g,P]),l.useEffect(()=>{if(!e||!i)return;const h=m(N=>{!N.walletAddress||!e||N.walletAddress.toLowerCase()===e.toLowerCase()&&N.chainId===i&&P()});return()=>{h()}},[e,i,m,P]),l.useEffect(()=>{f==="activity"&&e&&pe()},[f,e,M,pe]);const ve=e?(a==null?void 0:a.toLowerCase())===e.toLowerCase()||(n==null?void 0:n.toLowerCase())===e.toLowerCase()||((he=d==null?void 0:d.address)==null?void 0:he.toLowerCase())===e.toLowerCase():!1,J=o&&c&&ve;return r.jsxs("div",{className:"bg-[var(--card)] rounded-lg p-6",children:[r.jsx("h2",{className:"text-xl font-semibold text-white mb-6",children:"Wallet"}),r.jsxs("div",{className:"space-y-8",children:[r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-300 mb-3",children:"Wallet Address"}),r.jsx("div",{className:"w-full bg-[var(--card2)] border border-[var(--card-boarder)] rounded-lg px-4 py-2.5 text-white font-mono text-sm break-all",children:e||"N/A"})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-300 mb-3",children:"Balance"}),r.jsx("div",{className:"w-full bg-[var(--card2)] border border-[var(--card-boarder)] rounded-lg px-4 py-2.5 text-white font-mono text-sm",children:w?`${ie(w.value.toString())} ${w.symbol}`:"Loading..."})]}),J&&r.jsxs("div",{className:"border-t border-[var(--card-boarder)] pt-6",children:[r.jsxs("div",{className:"flex gap-2 mb-6 bg-[var(--card2)] p-1 rounded-lg",children:[r.jsx("button",{onClick:()=>L("deposit"),className:`flex-1 py-2.5 px-4 rounded-md text-sm font-medium transition-all ${f==="deposit"?"bg-gradient-to-r from-[var(--primary)] to-[var(--accent-purple)] text-black shadow-[0_0_10px_rgba(0,243,255,0.5)]":"text-gray-400 hover:text-white hover:bg-[var(--card-hover)]"}`,children:"Deposit"}),r.jsx("button",{onClick:()=>L("withdraw"),className:`flex-1 py-2.5 px-4 rounded-md text-sm font-medium transition-all ${f==="withdraw"?"bg-gradient-to-r from-[var(--primary)] to-[var(--accent-purple)] text-black shadow-[0_0_10px_rgba(0,243,255,0.5)]":"text-gray-400 hover:text-white hover:bg-[var(--card-hover)]"}`,children:"Withdraw"}),r.jsx("button",{onClick:()=>{L("activity"),K(1)},className:`flex-1 py-2.5 px-4 rounded-md text-sm font-medium transition-all ${f==="activity"?"bg-gradient-to-r from-[var(--primary)] to-[var(--accent-purple)] text-black shadow-[0_0_10px_rgba(0,243,255,0.5)]":"text-gray-400 hover:text-white hover:bg-[var(--card-hover)]"}`,children:"Activity"})]}),f==="deposit"&&r.jsxs("div",{children:[r.jsx("h3",{className:"text-lg font-semibold text-white mb-4",children:"Deposit ETH"}),r.jsx("p",{className:"text-sm text-gray-400 mb-4",children:"Send ETH to this address from your external wallet"}),e&&r.jsxs("div",{className:"flex flex-col items-center gap-4",children:[r.jsx("div",{className:"bg-white p-4 rounded-lg",children:r.jsx(Ft,{value:e,size:200,level:"H"})}),r.jsx("div",{className:"w-full",children:r.jsxs("div",{className:"flex items-center gap-2",children:[r.jsx("input",{type:"text",value:e,readOnly:!0,className:"flex-1 bg-[var(--card2)] border border-[var(--card-boarder)] rounded-lg px-4 py-2 text-white font-mono text-xs break-all"}),r.jsx("button",{onClick:p,className:"p-2.5 bg-[var(--card2)] border border-[var(--card-boarder)] rounded-lg hover:bg-[var(--card-hover)] transition-colors",title:"Copy address",children:B?r.jsx(kr,{className:"w-5 h-5 text-[var(--primary)]"}):r.jsx(Rr,{className:"w-5 h-5 text-gray-400"})})]})})]})]}),f==="withdraw"&&r.jsxs("div",{children:[r.jsx("h3",{className:"text-lg font-semibold text-white mb-4",children:"Withdraw ETH"}),r.jsx("p",{className:"text-sm text-gray-400 mb-4",children:"Send ETH from your embedded wallet to another address"}),r.jsxs("form",{onSubmit:S,className:"space-y-4",children:[r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-300 mb-2",children:"Recipient Address"}),r.jsx("input",{type:"text",value:E,onChange:h=>_(h.target.value),placeholder:"0x...",className:"w-full bg-[var(--card2)] border border-[var(--card-boarder)] rounded-lg px-4 py-2.5 text-white placeholder-gray-500 focus:outline-none focus:ring-2 focus:ring-[var(--primary)] focus:border-transparent font-mono text-sm",required:!0})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-300 mb-2",children:"Amount (ETH)"}),r.jsxs("div",{className:"flex gap-2",children:[r.jsx("input",{type:"number",step:"0.000001",min:"0",value:v,onChange:h=>k(h.target.value),placeholder:"0.0",className:"flex-1 bg-[var(--card2)] border border-[var(--card-boarder)] rounded-lg px-4 py-2.5 text-white placeholder-gray-500 focus:outline-none focus:ring-2 focus:ring-[var(--primary)] focus:border-transparent",required:!0}),r.jsx("button",{type:"button",onClick:W,className:"px-4 py-2.5 bg-[var(--card2)] border border-[var(--card-boarder)] rounded-lg text-gray-300 hover:bg-[var(--card-hover)] transition-colors text-sm font-medium",children:"Max"})]}),w&&r.jsxs("p",{className:"text-xs text-gray-500 mt-1",children:["Available: ",ie(w.value.toString())," ",w.symbol]})]}),r.jsx("button",{type:"submit",disabled:b||!E||!v,className:"w-full bg-[var(--primary)] text-black py-3 px-4 rounded-lg font-semibold hover:bg-[var(--primary-hover)] transition-colors disabled:opacity-50 disabled:cursor-not-allowed flex items-center justify-center gap-2",children:b?r.jsxs(r.Fragment,{children:[r.jsxs("svg",{className:"animate-spin h-5 w-5",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",children:[r.jsx("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),r.jsx("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}),"Processing..."]}):"Withdraw"})]}),y&&r.jsxs("div",{className:"mt-4 p-4 bg-[var(--card2)] border border-[var(--card-boarder)] rounded-lg",children:[r.jsx("p",{className:"text-sm text-gray-400 mb-1",children:"Transaction Hash:"}),r.jsx("a",{href:xe(y,i),target:"_blank",rel:"noopener noreferrer",className:"text-[var(--primary)] hover:underline font-mono text-sm break-all",children:y})]})]}),f==="activity"&&r.jsxs("div",{children:[r.jsx("h3",{className:"text-lg font-semibold text-white mb-4",children:"Transaction History"}),r.jsx("p",{className:"text-sm text-gray-400 mb-4",children:"View your deposit and withdrawal history"}),fe?r.jsx("div",{className:"flex justify-center py-8",children:r.jsxs("svg",{className:"animate-spin h-8 w-8 text-[var(--primary)]",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",children:[r.jsx("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),r.jsx("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]})}):D.length>0?r.jsxs("div",{className:"space-y-3",children:[D.map(h=>{const N=h.type==="deposit",Z=new Date(h.blockTimestamp);return r.jsxs("div",{className:"bg-[var(--card2)] border border-[var(--card-boarder)] rounded-lg p-4",children:[r.jsxs("div",{className:"flex items-center justify-between mb-2",children:[r.jsxs("div",{className:"flex items-center gap-2",children:[r.jsx("div",{className:`w-2 h-2 rounded-full ${N?"bg-green-500":"bg-red-500"}`}),r.jsx("span",{className:"text-sm font-semibold text-white",children:N?"Deposit":"Withdraw"})]}),r.jsxs("span",{className:"text-xs text-gray-400",children:[Z.toLocaleDateString()," ",Z.toLocaleTimeString()]})]}),r.jsxs("div",{className:"space-y-1 text-sm",children:[h.amount&&r.jsxs("div",{className:"flex justify-between",children:[r.jsx("span",{className:"text-gray-400",children:"Amount:"}),r.jsxs("span",{className:"text-white font-medium",children:[ie(h.amount)," ETH"]})]}),h.amountUSD&&parseFloat(h.amountUSD)>0&&r.jsxs("div",{className:"flex justify-between",children:[r.jsx("span",{className:"text-gray-400",children:"Amount (USD):"}),r.jsxs("span",{className:"text-white font-medium",children:["$",parseFloat(h.amountUSD).toFixed(2)]})]}),h.type==="withdraw"&&h.toAddress&&h.toAddress.length>=10&&r.jsxs("div",{className:"flex justify-between",children:[r.jsx("span",{className:"text-gray-400",children:"To:"}),r.jsxs("span",{className:"text-white font-mono text-xs",children:[h.toAddress.slice(0,6),"...",h.toAddress.slice(-4)]})]}),h.type==="deposit"&&h.fromAddress&&h.fromAddress.length>=10&&r.jsxs("div",{className:"flex justify-between",children:[r.jsx("span",{className:"text-gray-400",children:"From:"}),r.jsxs("span",{className:"text-white font-mono text-xs",children:[h.fromAddress.slice(0,6),"...",h.fromAddress.slice(-4)]})]}),h.txHash&&r.jsx("div",{className:"pt-2 border-t border-[var(--card-boarder)]",children:r.jsx("a",{href:xe(h.txHash,h.chainId||i),target:"_blank",rel:"noopener noreferrer",className:"text-[var(--primary)] hover:underline font-mono text-xs break-all",children:"View on Explorer"})})]})]},h.id||h.txHash)}),$>1&&r.jsxs("div",{className:"flex items-center justify-between pt-4",children:[r.jsx("button",{onClick:()=>{M>1&&K(M-1)},disabled:M===1,className:"px-4 py-2 bg-[var(--card2)] border border-[var(--card-boarder)] rounded-lg text-gray-400 hover:text-white hover:bg-[var(--card-hover)] transition-colors disabled:opacity-50 disabled:cursor-not-allowed",children:"Previous"}),r.jsxs("span",{className:"text-sm text-gray-400",children:["Page ",M," of ",$]}),r.jsx("button",{onClick:()=>{M<$&&K(M+1)},disabled:M===$,className:"px-4 py-2 bg-[var(--card2)] border border-[var(--card-boarder)] rounded-lg text-gray-400 hover:text-white hover:bg-[var(--card-hover)] transition-colors disabled:opacity-50 disabled:cursor-not-allowed",children:"Next"})]})]}):r.jsx("div",{className:"text-center py-8",children:r.jsx("p",{className:"text-gray-400 text-sm",children:"No activity history found"})})]})]}),!J&&ve&&r.jsx("div",{className:"border-t border-[var(--card-boarder)] pt-6",children:r.jsx("p",{className:"text-sm text-gray-400 text-center",children:"Deposit and Withdraw are only available for embedded wallets. Please log in with email to use these features."})})]})]})},Ht=({currentAvatar:e,onAvatarChange:t,disabled:a=!1})=>{const[s,o]=l.useState(!1),[n,d]=l.useState(!1),[c,i]=l.useState(null),g=l.useRef(null),m=l.useCallback(async b=>{if(!b.type.startsWith("image/")){T.error("Please select an image file");return}if(b.size>2*1024*1024){T.error("Image size must be less than 2MB");return}const R=new FileReader;R.onload=y=>{var U;i((U=y.target)==null?void 0:U.result)},R.readAsDataURL(b),o(!0);try{const y=await lt(b);t(y.url),i(null),T.success("Avatar uploaded successfully!")}catch(y){console.error("Error uploading avatar:",y);const U=y instanceof Error?y.message:"Failed to upload avatar";T.error(U),i(null)}finally{o(!1)}},[t]),w=l.useCallback(b=>{b.preventDefault(),b.stopPropagation(),!a&&!s&&d(!0)},[a,s]),P=l.useCallback(b=>{b.preventDefault(),b.stopPropagation(),d(!1)},[]),B=l.useCallback(b=>{if(b.preventDefault(),b.stopPropagation(),d(!1),a||s)return;const R=b.dataTransfer.files[0];R&&m(R)},[a,s,m]),A=l.useCallback(b=>{var y;const R=(y=b.target.files)==null?void 0:y[0];R&&m(R),g.current&&(g.current.value="")},[m]),E=l.useCallback(b=>{b.stopPropagation(),t(null),i(null),T.success("Avatar removed")},[t]),_=l.useCallback(()=>{!a&&!s&&g.current&&g.current.click()},[a,s]),v=c||e||"/chats/noimg.svg",k=e&&e!=="/chats/noimg.svg";return r.jsxs("div",{className:"flex flex-col items-center gap-4",children:[r.jsxs("div",{className:`relative group ${a?"opacity-50 cursor-not-allowed":"cursor-pointer"}`,onDragOver:w,onDragLeave:P,onDrop:B,onClick:_,children:[r.jsxs("div",{className:`relative w-32 h-32 rounded-full overflow-hidden border-2 transition-all duration-300 ${n?"border-[var(--primary)] ring-4 ring-[var(--primary)]/30 scale-105":"border-gray-700 group-hover:border-[var(--primary)]"} ${a?"":"hover:shadow-[0_0_20px_rgba(0,243,255,0.3)]"}`,children:[r.jsx("img",{src:v,alt:"Avatar",className:"w-full h-full object-cover transition-transform duration-300 group-hover:scale-110",onError:b=>{b.target.src="/chats/noimg.svg"}}),!a&&r.jsx("div",{className:`absolute inset-0 bg-gradient-to-br from-black/70 to-black/50 flex items-center justify-center transition-all duration-300 ${n||s?"opacity-100":"opacity-0 group-hover:opacity-100"}`,children:s?r.jsxs("div",{className:"flex flex-col items-center gap-2",children:[r.jsxs("svg",{className:"animate-spin h-8 w-8 text-[var(--primary)]",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",children:[r.jsx("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),r.jsx("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}),r.jsx("span",{className:"text-xs text-white font-medium",children:"Uploading..."})]}):n?r.jsxs("div",{className:"flex flex-col items-center gap-2",children:[r.jsx(Ye,{className:"w-10 h-10 text-[var(--primary)]"}),r.jsx("span",{className:"text-sm text-white font-medium",children:"Drop to upload"})]}):r.jsxs("div",{className:"flex flex-col items-center gap-2",children:[r.jsx(ot,{className:"w-8 h-8 text-[var(--primary)]"}),r.jsx("span",{className:"text-xs text-white font-medium",children:"Change photo"})]})})]}),!a&&k&&!s&&r.jsx("button",{type:"button",onClick:E,className:"absolute -top-1 -right-1 w-7 h-7 bg-red-500 rounded-full flex items-center justify-center hover:bg-red-600 transition-all duration-200 shadow-lg hover:scale-110 z-10",title:"Remove avatar",children:r.jsx(Ie,{className:"w-4 h-4 text-white"})})]}),r.jsx("input",{ref:g,type:"file",accept:"image/*",onChange:A,className:"hidden",disabled:a||s}),!a&&r.jsxs("div",{className:"text-center",children:[r.jsx("p",{className:"text-sm text-gray-400 font-medium",children:"Click or drag to upload"}),r.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"PNG, JPG, WebP up to 2MB"})]})]})},Wt=e=>{if(!e)return!1;const t=[".mp4",".mov",".webm",".ogg",".avi"],a=e.toLowerCase();return t.some(s=>a.includes(s))||a.includes("/video/")||a.includes("resource_type=video")},Qt=({tokenAddress:e,symbol:t,userAddress:a,chainId:s,tokenData:o,onClick:n})=>{var y,U;const d=Ue(),c=s||d,[i,g]=l.useState(null),[m,w]=l.useState(!1),[P,B]=l.useState((o==null?void 0:o.balance)||"0"),[A,E]=l.useState(o!=null&&o.graduationProgress?{graduationProgress:o.graduationProgress,percentage:0}:null);l.useEffect(()=>{if(o&&o.name&&o.logo!==void 0&&o.balance!==void 0){B(o.balance||"0"),o.graduationProgress&&E({graduationProgress:o.graduationProgress,percentage:0}),o.name&&o.logo!==void 0&&g({name:o.name,symbol:o.symbol||"",logo:o.logo||"/chats/noimg.svg",address:e||"",chainId:c||0,graduationProgress:o.graduationProgress||"0"});return}e&&(w(!0),Fr(e,1,1,c).then(L=>{L&&g(L)}).catch(()=>{}).finally(()=>{w(!1)}))},[e,c,o]),l.useEffect(()=>{if(o!=null&&o.balance){B(o.balance);return}if(!e||!a||!c)return;(async()=>{try{const L=await zr(e,a,c);B(L.tokenBalance)}catch(L){console.error("Error fetching user balance:",L)}})()},[e,a,c,o]),l.useEffect(()=>{var D;if(o!=null&&o.graduationProgress){E({graduationProgress:o.graduationProgress,percentage:0});return}if(i!=null&&i.graduationProgress&&i.graduationProgress!=="0"&&i.graduationProgress!==void 0){E({graduationProgress:i.graduationProgress,percentage:0});return}if(!!((D=i==null?void 0:i._count)!=null&&D.liquidityEvents)||!e||!c)return;(async()=>{try{const V=await Hr(e,c);E(V)}catch(V){console.error("Error fetching graduation progress:",V)}})()},[e,c,i==null?void 0:i.graduationProgress,(y=i==null?void 0:i._count)==null?void 0:y.liquidityEvents,o]);const v=(f=>{var L;try{if((((L=i==null?void 0:i._count)==null?void 0:L.liquidityEvents)??0)>0)return 100;if(!f||f==="0")return 0;const V=Number(f)/1e18*100;return Math.min(Math.max(V,0),100)}catch(D){return console.error("Error calculating progress:",D),0}})(A==null?void 0:A.graduationProgress),k=(((U=i==null?void 0:i._count)==null?void 0:U.liquidityEvents)??0)>0,b=c?Xe[c]:null;if(!P||P.toString()==="0")return null;const R=f=>{f.stopPropagation();const L=Ke(c);window.open(`${L}/address/${e}`,"_blank")};return r.jsxs("div",{className:"bg-[var(--card)] rounded-lg p-4 cursor-pointer hover:bg-[var(--card-hover)] transition-colors duration-200 relative border border-[var(--card-boarder)] hover:border-[var(--primary)] group",onClick:n,children:[b&&r.jsx("div",{className:"absolute top-2 right-2 p-1 rounded-lg bg-[var(--card2)]/80 backdrop-blur-sm border border-[var(--card-boarder)] z-10",onClick:f=>f.stopPropagation(),children:r.jsx(b,{size:16,className:"rounded-full",variant:"branded"})}),i&&r.jsxs("div",{className:"absolute top-10 right-2 flex items-center gap-1.5",onClick:f=>f.stopPropagation(),children:[i.website&&r.jsx("a",{href:i.website,target:"_blank",rel:"noopener noreferrer",className:"p-1 rounded-lg text-[var(--text-secondary)] hover:text-[var(--primary)] hover:bg-[var(--card-hover)] border border-transparent hover:border-[var(--primary)] transition-all duration-300",children:r.jsx(et,{size:12})}),i.twitter&&r.jsx("a",{href:i.twitter,target:"_blank",rel:"noopener noreferrer",className:"p-1 rounded-lg text-[var(--text-secondary)] hover:text-[var(--primary)] hover:bg-[var(--card-hover)] border border-transparent hover:border-[var(--primary)] transition-all duration-300",onClick:f=>f.stopPropagation(),children:r.jsx(rt,{size:12})}),i.telegram&&r.jsx("a",{href:i.telegram,target:"_blank",rel:"noopener noreferrer",className:"p-1 rounded-lg text-[var(--text-secondary)] hover:text-[var(--primary)] hover:bg-[var(--card-hover)] border border-transparent hover:border-[var(--primary)] transition-all duration-300",onClick:f=>f.stopPropagation(),children:r.jsx(Or,{size:12})}),i.discord&&r.jsx("a",{href:i.discord,target:"_blank",rel:"noopener noreferrer",className:"p-1 rounded-lg text-[var(--text-secondary)] hover:text-[var(--primary)] hover:bg-[var(--card-hover)] border border-transparent hover:border-[var(--primary)] transition-all duration-300",onClick:f=>f.stopPropagation(),children:r.jsx(tt,{size:12})}),i.youtube&&r.jsx("a",{href:i.youtube,target:"_blank",rel:"noopener noreferrer",className:"p-1 rounded-lg text-[var(--text-secondary)] hover:text-[var(--primary)] hover:bg-[var(--card-hover)] border border-transparent hover:border-[var(--primary)] transition-all duration-300",onClick:f=>f.stopPropagation(),children:r.jsx(st,{size:12})})]}),r.jsxs("div",{className:"flex items-center gap-3 mb-3",children:[r.jsx("div",{className:"w-12 h-12 flex-shrink-0 rounded-lg overflow-hidden border border-[var(--card-boarder)] group-hover:border-[var(--primary)] transition-all duration-300",children:m?r.jsx("div",{className:"w-full h-full bg-[var(--card2)] flex items-center justify-center",children:r.jsxs("svg",{className:"animate-spin h-5 w-5 text-[var(--primary)]",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",children:[r.jsx("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),r.jsx("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]})}):(()=>{const f=(i==null?void 0:i.logo)||(o==null?void 0:o.logo),L=(i==null?void 0:i.name)||(o==null?void 0:o.name)||t;return f&&f!=="/chats/noimg.svg"?Wt(f)?r.jsx("video",{src:f,className:"w-full h-full object-cover",muted:!0,loop:!0,playsInline:!0,autoPlay:!0}):r.jsx("img",{src:f,alt:L,className:"w-full h-full object-cover",onError:D=>{D.target.src="/chats/noimg.svg"}}):r.jsx("img",{src:"/chats/noimg.svg",alt:t,className:"w-full h-full object-cover"})})()}),r.jsxs("div",{className:"flex-grow min-w-0",children:[r.jsx("h3",{className:"text-sm font-semibold text-white mb-1 truncate",children:(i==null?void 0:i.name)||(o==null?void 0:o.name)||t}),r.jsx("p",{className:"text-xs text-[var(--text-secondary)]",children:t})]})]}),r.jsxs("div",{className:"mb-3",children:[r.jsx("p",{className:"text-xs text-[var(--text-secondary)] mb-1",children:"Balance"}),r.jsx("p",{className:"text-sm font-semibold text-white",children:ie(P)})]}),r.jsxs("div",{className:"mb-3",children:[r.jsxs("div",{className:"flex justify-between text-xs mb-1",children:[r.jsx("span",{className:"text-[var(--text-secondary)]",children:"Progress to DEX"}),r.jsx("span",{className:`font-semibold ${k?"gradient-text-cyan":"text-white"}`,children:k?"Completed":`${v.toFixed(1)}%`})]}),r.jsx("div",{className:"w-full bg-[var(--card-boarder)] rounded-full h-1.5 overflow-hidden",children:r.jsx("div",{className:"h-1.5 rounded-full transition-all duration-500 bg-gradient-to-r from-[var(--primary)] to-[var(--accent-purple)] shadow-[0_0_8px_rgba(0,243,255,0.4)]",style:{width:`${v}%`}})})]}),r.jsx("div",{className:"pt-2 border-t border-[var(--card-boarder)]",children:r.jsxs("p",{className:"text-[10px] text-[var(--text-secondary)]",children:["Address:",r.jsx("span",{className:"text-[var(--primary)] hover:underline ml-1 cursor-pointer font-mono",onClick:R,children:Ae(e)})]})})]})},Gt=({currentPage:e,totalPages:t,onPageChange:a})=>r.jsxs("div",{className:"flex justify-center items-center space-x-2 mt-6",children:[r.jsx("button",{onClick:()=>a(e-1),disabled:e===1,className:"p-2 rounded-md bg-[var(--card)] text-gray-400 hover:bg-[var(--card-hover)] disabled:opacity-50 disabled:cursor-not-allowed",children:r.jsx(Qr,{className:"h-4 w-4 sm:h-5 sm:w-5"})}),r.jsx("div",{className:"flex items-center space-x-1",children:[...Array(t)].map((s,o)=>{const n=o+1;return n===1||n===t||n>=e-1&&n<=e+1?r.jsx("button",{onClick:()=>a(n),className:`px-3 py-1 rounded-md text-sm transition-colors duration-200 ${e===n?"bg-[var(--primary)] text-black":"bg-[var(--card)] text-gray-400 hover:bg-[var(--card-hover)]"}`,children:n},n):n===e-2||n===e+2?r.jsx("span",{className:"text-gray-500 text-xs sm:text-sm",children:"..."},n):null})}),r.jsx("button",{onClick:()=>a(e+1),disabled:e===t,className:"p-2 rounded-md bg-[var(--card)] text-gray-400 hover:bg-[var(--card-hover)] disabled:opacity-50 disabled:cursor-not-allowed",children:r.jsx(Gr,{className:"h-4 w-4 sm:h-5 sm:w-5"})})]}),ye=({title:e,isActive:t,onClick:a})=>r.jsx("button",{className:`w-full text-left rounded-lg py-3 px-4 text-sm font-medium leading-5 transition-colors ${t?"bg-[var(--card-boarder)] text-white":"text-gray-400 hover:bg-[var(--card-hover)] hover:text-white"}`,onClick:a,children:e}),ns=()=>{var We;const e=Sr(),{address:t}=Oe(),{address:a}=Br(),[s,o]=l.useState([]),[n,d]=l.useState(1),[c,i]=l.useState(1),[g,m]=l.useState(!1),[w,P]=l.useState([]),[B,A]=l.useState(!1),[E,_]=l.useState(null),[v,k]=l.useState("profile"),[b,R]=l.useState(null),[y,U]=l.useState(1),[f,L]=l.useState(!1),[D,V]=l.useState(null),[fe,ue]=l.useState(!1),[M,K]=l.useState(""),[$,te]=l.useState(""),[p,S]=l.useState(""),[W,xe]=l.useState(!1),[pe,ve]=l.useState(!1),[J,he]=l.useState(!1),[h,N]=l.useState(""),[Z,ce]=l.useState(""),[hr,_e]=l.useState(""),[ke,q]=l.useState(""),[Re,be]=l.useState(""),{user:se,refreshUser:mr}=Ve(),j=a||t||(se==null?void 0:se.address)||"",me=Ue(),X=(t==null?void 0:t.toLowerCase())===j.toLowerCase()||((We=se==null?void 0:se.address)==null?void 0:We.toLowerCase())===j.toLowerCase()||!a&&(t||(se==null?void 0:se.address)),Ce=l.useCallback(async(u,x)=>{m(!0);try{const C=await Wr(u,x);o(C.transactions),i(C.totalPages)}catch{o([])}finally{m(!1)}},[]),Me=l.useCallback(async u=>{if(u){A(!0),_(null);try{const x=await Vr(u);P(x||[])}catch(x){console.error("Error fetching tokens:",x);const C=x instanceof Error?x.message:"Failed to load tokens";_(C),P([])}finally{A(!1)}}},[]),ge=l.useCallback(async(u,x)=>{L(!0);try{const C=await $r(u,x,20);R(C)}catch(C){console.error("Error fetching created tokens:",C),R({data:[],totalCount:0,currentPage:1,totalPages:1,tokens:[]})}finally{L(!1)}},[]),ze=l.useCallback(async u=>{ve(!0);try{const x=await nt(u),C=x.username||"",z=x.bio||"",F=x.avatar||"/chats/noimg.svg";K(C),te(z),S(F),N(C),ce(z),_e(F)}catch(x){console.error("Error fetching user profile:",x),K(""),te(""),S("/chats/noimg.svg"),N(""),ce(""),_e("/chats/noimg.svg")}finally{ve(!1)}},[]),gr=async()=>{var C,z;if(!j)return;if(!X){T.error("You can only edit your own profile");return}q(""),be("");const u=M.trim();if(!u){q("Username is required");return}if(u.length<3){q("Username must be at least 3 characters");return}if(u.length>30){q("Username must be 30 characters or less");return}if(!/^[a-zA-Z0-9_-]+$/.test(u)){q("Username can only contain letters, numbers, underscores, and hyphens");return}xe(!0);try{const F=await it({username:u,bio:$.trim(),avatar:p!=="/chats/noimg.svg"?p:void 0}),ae=F.avatar||"/chats/noimg.svg";K(F.username||u),te(F.bio||$.trim()),S(ae),await mr(),N(F.username||u),ce(F.bio||$.trim()),_e(ae),he(!1),q(""),be(""),T.success("Profile updated successfully!")}catch(F){const ae=F instanceof Error&&(((z=(C=F.response)==null?void 0:C.data)==null?void 0:z.error)||F.message)||"Failed to update profile";ae.toLowerCase().includes("username")&&(ae.toLowerCase().includes("taken")||ae.toLowerCase().includes("already"))?q("Username is already taken. Please choose another one."):T.error(ae)}finally{xe(!1)}},fr=l.useCallback(async()=>{j&&await ge(j,y)},[j,y,ge]);l.useEffect(()=>{!X&&(v==="wallet"||v==="transactions")&&k("profile")},[X,v]);const Te=l.useRef(!0),He=l.useRef("");l.useEffect(()=>{j&&j!==He.current&&(He.current=j,Te.current=!0,d(1),U(1),Ce(j,1),Me(j),ge(j,1),ze(j),setTimeout(()=>{Te.current=!1},100))},[j,Ce,Me,ge,ze]),l.useEffect(()=>{j&&v==="transactions"&&!Te.current&&n!==1&&Ce(j,n)},[j,n,v,Ce]),l.useEffect(()=>{j&&v==="created"&&!Te.current&&y!==1&&ge(j,y)},[j,y,v,ge]);const xr=u=>{d(u)},pr=u=>{if(!u||u===""||typeof u!="string")return"Unknown";try{const x=w.find(C=>{if(!C)return!1;const z=(C==null?void 0:C.address)||(C==null?void 0:C.token_address);return!z||typeof z!="string"?!1:z.toLowerCase()===u.toLowerCase()});return x&&x.symbol||"Unknown"}catch(x){return console.error("Error in getTokenSymbol:",x),"Unknown"}},vr=l.useCallback((u,x)=>`${Ke(x||me)}/tx/${u}`,[me]),br=u=>{try{const x=parseFloat(u);return isNaN(x)||x===0?"N/A":x<1e-6?x.toExponential(2):x<1?x.toFixed(6):x.toFixed(4)}catch{return"N/A"}},wr=(u,x)=>{A(!0),e(`/token/${x||1}/${u}`),A(!1)},yr=u=>{U(u)};return r.jsxs(Mr,{children:[r.jsx(Yr,{title:`${j?`Profile: ${Ae(j)}`:"Your Profile"} - BondX`,description:`View token holdings and transactions for ${j?Ae(j):"your account"}.`,image:"seo/profile.jpg"}),r.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:[r.jsx("h1",{className:"text-xl sm:text-2xl font-bold text-white mb-6",children:M||(pe?"Loading...":Ae(j))}),r.jsx("div",{className:"mb-8",children:r.jsxs("div",{className:"flex flex-col md:flex-row gap-4",children:[r.jsx("div",{className:"w-full md:w-64 flex-shrink-0",children:r.jsxs("div",{className:"bg-[var(--card2)] rounded-lg p-2 space-y-2",children:[r.jsx(ye,{title:"Profile",isActive:v==="profile",onClick:()=>k("profile")}),X&&r.jsx(ye,{title:"Wallet",isActive:v==="wallet",onClick:()=>k("wallet")}),r.jsx(ye,{title:"Tokens Held",isActive:v==="held",onClick:()=>k("held")}),r.jsx(ye,{title:"Tokens Created",isActive:v==="created",onClick:()=>k("created")}),X&&r.jsx(ye,{title:"Recent Transactions",isActive:v==="transactions",onClick:()=>k("transactions")})]})}),r.jsxs("div",{className:"flex-1",children:[v==="profile"&&r.jsxs("div",{className:"bg-[var(--card)] rounded-lg p-6",children:[r.jsxs("div",{className:"flex items-center justify-between mb-6",children:[r.jsx("h2",{className:"text-xl font-semibold text-white",children:"Profile"}),X&&!J&&r.jsxs("button",{onClick:()=>{he(!0),q(""),be("")},className:"flex items-center gap-2 px-4 py-2 bg-[var(--primary)] text-black rounded-lg font-semibold hover:bg-[var(--primary-hover)] transition-colors",children:[r.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg",children:r.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M11 5H6a2 2 0 00-2 2v11a2 2 0 002 2h11a2 2 0 002-2v-5m-1.414-9.414a2 2 0 112.828 2.828L11.828 15H9v-2.828l8.586-8.586z"})}),"Edit"]})]}),pe?r.jsx("div",{className:"flex justify-center py-8",children:r.jsx(we,{size:"medium"})}):r.jsxs("div",{className:"space-y-6",children:[r.jsxs("div",{className:"flex flex-col sm:flex-row gap-6 sm:gap-8 pb-6 border-b border-[var(--card-boarder)]",children:[r.jsx("div",{className:"flex-shrink-0 flex flex-col items-center sm:items-start",children:J?r.jsx(Ht,{currentAvatar:p,onAvatarChange:u=>S(u||"/chats/noimg.svg"),disabled:W}):r.jsx("div",{className:"relative",children:r.jsx("div",{className:"w-28 h-28 sm:w-32 sm:h-32 rounded-full overflow-hidden border-2 border-gray-700 shadow-lg ring-2 ring-gray-800/50",children:r.jsx("img",{src:p||"/chats/noimg.svg",alt:"Avatar",className:"w-full h-full object-cover",onError:u=>{u.target.src="/chats/noimg.svg"}})})})}),r.jsxs("div",{className:"flex-1 space-y-4 min-w-0",children:[r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-300 mb-2",children:"Username"}),J?r.jsxs(r.Fragment,{children:[r.jsx("input",{type:"text",value:M,onChange:u=>{K(u.target.value),q("")},disabled:!X||!J,className:`w-full bg-[var(--card2)] border rounded-lg px-4 py-2.5 text-white placeholder-gray-500 focus:outline-none focus:ring-2 focus:ring-[var(--primary)] focus:border-transparent disabled:opacity-50 disabled:cursor-not-allowed transition-all ${ke?"border-red-500 focus:ring-red-500":"border-[var(--card-boarder)]"}`,placeholder:"Enter username",maxLength:15}),ke?r.jsx("p",{className:"text-xs text-red-400 mt-1",children:ke}):r.jsxs("p",{className:"text-xs text-gray-500 mt-1",children:[M.length,"/15  Must be 3-15 characters, letters, numbers, underscores, and hyphens only"]})]}):r.jsx("div",{className:"bg-[var(--card2)] border border-[var(--card-boarder)] rounded-lg px-4 py-3",children:r.jsx("p",{className:"text-white font-semibold text-lg",children:M||r.jsx("span",{className:"text-gray-500 italic font-normal",children:"No username set"})})})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-300 mb-2",children:"Bio"}),J?r.jsxs(r.Fragment,{children:[r.jsx("textarea",{value:$,onChange:u=>{te(u.target.value),be("")},disabled:!X||!J,className:`w-full bg-[var(--card2)] border rounded-lg px-4 py-2.5 text-white placeholder-gray-500 focus:outline-none focus:ring-2 focus:ring-[var(--primary)] focus:border-transparent disabled:opacity-50 disabled:cursor-not-allowed resize-none transition-all ${Re?"border-red-500 focus:ring-red-500":"border-[var(--card-boarder)]"}`,placeholder:"Tell us about yourself...",rows:4,maxLength:200}),Re?r.jsx("p",{className:"text-xs text-red-400 mt-1",children:Re}):r.jsxs("p",{className:"text-xs text-gray-500 mt-1",children:[$.length,"/200"]})]}):r.jsx("div",{className:"bg-[var(--card2)] border border-[var(--card-boarder)] rounded-lg px-4 py-3 min-h-[100px]",children:r.jsx("p",{className:"text-white text-sm leading-relaxed whitespace-pre-wrap",children:$||r.jsx("span",{className:"text-gray-500 italic",children:"No bio set"})})})]})]})]}),X&&J&&r.jsxs("div",{className:"flex gap-3",children:[r.jsx("button",{onClick:()=>{K(h),te(Z),S(hr),he(!1),q(""),be("")},disabled:W,className:"flex-1 bg-gray-600 text-white py-3 px-4 rounded-lg font-semibold hover:bg-gray-700 transition-colors disabled:opacity-50 disabled:cursor-not-allowed",children:"Cancel"}),r.jsx("button",{onClick:gr,disabled:W,className:"flex-1 bg-[var(--primary)] text-black py-3 px-4 rounded-lg font-semibold hover:bg-[var(--primary-hover)] transition-colors disabled:opacity-50 disabled:cursor-not-allowed flex items-center justify-center gap-2",children:W?r.jsxs(r.Fragment,{children:[r.jsxs("svg",{className:"animate-spin h-5 w-5",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",children:[r.jsx("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),r.jsx("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}),"Saving..."]}):"Save"})]})]})]}),v==="wallet"&&X&&r.jsx(zt,{address:j,chainId:me}),v==="held"&&r.jsxs("div",{className:"bg-[var(--card)] rounded-lg p-6",children:[r.jsx("h2",{className:"text-xl font-semibold text-white mb-6",children:"Tokens Held"}),B?r.jsx("div",{className:"flex justify-center py-8",children:r.jsx(we,{size:"medium"})}):E?r.jsxs("div",{className:"text-center py-8",children:[r.jsx("p",{className:"text-red-400 text-sm sm:text-base mb-4",children:E}),r.jsx("button",{onClick:()=>Me(j),className:"px-4 py-2 bg-[var(--primary)] text-black rounded-lg hover:bg-[var(--primary-hover)] transition-colors",children:"Retry"})]}):w.length>0?r.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-4",children:w.map(u=>r.jsx(Qt,{tokenAddress:(u==null?void 0:u.token_address)||u.address,symbol:u.symbol,userAddress:j,chainId:u.chainId||me,tokenData:u,onClick:()=>wr(u.address||u.token_address,u.chainId||me)},u.address||u.token_address))}):r.jsx("p",{className:"text-gray-400 text-center text-sm sm:text-base",children:"No tokens held"})]}),v==="created"&&r.jsxs("div",{className:"bg-[var(--card)] rounded-lg p-6",children:[r.jsx("h2",{className:"text-xl font-semibold text-white mb-6",children:"Tokens Created"}),f?r.jsx("div",{className:"flex justify-center py-8",children:r.jsx(we,{size:"medium"})}):b!=null&&b.data&&b.data.length>0?r.jsx(Jr,{tokens:b.data,currentPage:y,totalPages:b.totalPages||1,onPageChange:yr,isEnded:!1,sortType:"trending",itemsPerPage:20,isFullList:!1}):r.jsx("p",{className:"text-gray-400 text-center text-sm sm:text-base",children:"No tokens created"})]}),v==="transactions"&&X&&r.jsxs("div",{className:"bg-[var(--card)] rounded-lg p-6",children:[r.jsx("h2",{className:"text-xl font-semibold text-white mb-6",children:"Recent Transactions"}),g?r.jsx("div",{className:"flex justify-center py-8",children:r.jsx(we,{size:"medium"})}):s&&s.length>0?r.jsxs(r.Fragment,{children:[r.jsx("div",{className:"overflow-x-auto bg-[var(--card)] rounded-lg",children:r.jsxs("table",{className:"min-w-full divide-y divide-[var(--card-boarder)]",children:[r.jsx("thead",{className:"bg-[var(--card2)]",children:r.jsxs("tr",{children:[r.jsx("th",{className:"px-3 py-3 text-left text-[10px] sm:text-xs font-medium text-gray-400 uppercase tracking-wider",children:"Chain"}),r.jsx("th",{className:"px-3 py-3 text-left text-[10px] sm:text-xs font-medium text-gray-400 uppercase tracking-wider",children:"Type"}),r.jsx("th",{className:"px-3 py-3 text-left text-[10px] sm:text-xs font-medium text-gray-400 uppercase tracking-wider",children:"Token"}),r.jsx("th",{className:"px-3 py-3 text-left text-[10px] sm:text-xs font-medium text-gray-400 uppercase tracking-wider",children:"Token Amount"}),r.jsx("th",{className:"px-3 py-3 text-left text-[10px] sm:text-xs font-medium text-gray-400 uppercase tracking-wider",children:"ETH Amount"}),r.jsx("th",{className:"px-3 py-3 text-left text-[10px] sm:text-xs font-medium text-gray-400 uppercase tracking-wider",children:"Price"}),r.jsx("th",{className:"px-3 py-3 text-left text-[10px] sm:text-xs font-medium text-gray-400 uppercase tracking-wider",children:"Date"}),r.jsx("th",{className:"px-3 py-3 text-left text-[10px] sm:text-xs font-medium text-gray-400 uppercase tracking-wider",children:"Tx Hash"})]})}),r.jsx("tbody",{className:"divide-y divide-[var(--card-boarder)]",children:s.map(u=>{const x=u.chainId||me,C=x?Xe[x]:null,z=x?Xr[x]:"Unknown",F=u.type==="Bought",ae=vr(u.txHash,x);return r.jsxs("tr",{className:"hover:bg-[var(--card-hover)] transition-colors duration-150",children:[r.jsx("td",{className:"px-3 py-3 whitespace-nowrap",children:C?r.jsxs("div",{className:"flex items-center gap-2",children:[r.jsx(C,{size:16,className:"rounded-full",variant:"branded"}),r.jsx("span",{className:"text-[10px] sm:text-xs text-gray-400 hidden sm:inline",children:z})]}):r.jsx("span",{className:"text-[10px] sm:text-xs text-gray-400",children:z})}),r.jsx("td",{className:"px-3 py-3 whitespace-nowrap",children:r.jsx("span",{className:`text-[10px] sm:text-xs font-semibold ${F?"text-green-400":"text-red-400"}`,children:u.type})}),r.jsx("td",{className:"px-3 py-3 whitespace-nowrap text-[10px] sm:text-xs text-gray-300",children:pr((u==null?void 0:u.tokenAddress)||(u==null?void 0:u.recipientAddress)||"")}),r.jsx("td",{className:"px-3 py-3 whitespace-nowrap text-[10px] sm:text-xs text-gray-300",children:ie(u.tokenAmount)}),r.jsxs("td",{className:"px-3 py-3 whitespace-nowrap text-[10px] sm:text-xs text-gray-300",children:[ie(u.ethAmount)," ETH"]}),r.jsx("td",{className:"px-3 py-3 whitespace-nowrap text-[10px] sm:text-xs text-gray-300",children:br(u.tokenPrice)}),r.jsx("td",{className:"px-3 py-3 whitespace-nowrap text-[10px] sm:text-xs text-gray-300",children:Ir(u.blockTimestamp||u.updatedAt)}),r.jsx("td",{className:"px-3 py-3 whitespace-nowrap",children:r.jsxs("a",{href:ae,target:"_blank",rel:"noopener noreferrer",className:"text-[10px] sm:text-xs text-[var(--primary)] hover:underline flex items-center gap-1 font-mono",onClick:jr=>jr.stopPropagation(),children:[u.txHash.slice(0,8),"...",r.jsx(qr,{className:"w-3 h-3 inline"})]})})]},u.id)})})]})}),c>1&&r.jsx(Gt,{currentPage:n,totalPages:c,onPageChange:xr})]}):r.jsx("p",{className:"text-gray-400 bg-[var(--card)] rounded-lg p-4 text-center",children:"No recent transactions."})]})]})]})})]}),B&&r.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:r.jsx(we,{size:"large"})}),D&&r.jsx(ht,{token:D,isOpen:fe,onClose:()=>{ue(!1),V(null)},onUpdate:fr})]})};export{ns as default};
