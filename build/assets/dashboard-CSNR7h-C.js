import{u as H,j as e}from"./web3-vendor-7W8dWh3w.js";import{u as U,r as n}from"./react-vendor-BTPJ9MfQ.js";import{L as Y,f as b,a as z,b as I}from"./Layout-Bsyg4zat.js";import{g as V,a as X,b as _,c as M}from"./api-Y8mGTqrB.js";import{S as O}from"./SEO-B8zD07Wz.js";import{S as q}from"./index-CpGdr-az.js";import{F as G,a as J}from"./ChevronRightIcon-8oQClXOB.js";const K=({tokenAddress:t,symbol:d,userAddress:o,chainId:x,onClick:i})=>{const[a,m]=n.useState("0");if(n.useEffect(()=>{if(!t||!o)return;(async()=>{try{const c=await M(t,o,x);m(c.tokenBalance)}catch(c){console.error("Error fetching user balance:",c),m("0")}})()},[t,o,x]),!a||a==="0")return null;const p=g=>{g.stopPropagation(),window.open(`https://etherscan.io/address/${t}`,"_blank")};return e.jsxs("div",{className:"bg-gray-800 rounded-lg p-4 cursor-pointer hover:bg-gray-700 transition-colors duration-200 shadow-md",onClick:i,children:[e.jsx("h3",{className:"text-xs sm:text-sm font-semibold text-blue-400 mb-2",children:d}),e.jsxs("p",{className:"text-gray-300 text-[10px] sm:text-xs",children:["Balance: ",b(a)]}),e.jsxs("p",{className:"text-gray-400 text-[10px] sm:text-xs mt-2",children:["Address:",e.jsx("span",{className:"text-blue-400 hover:underline ml-1 cursor-pointer",onClick:p,children:I(t)})]})]})},C=({currentPage:t,totalPages:d,onPageChange:o})=>e.jsxs("div",{className:"flex items-center justify-center mt-6 space-x-2",children:[e.jsx("button",{onClick:()=>o(t-1),disabled:t===1,className:"p-1 rounded-md bg-gray-800 text-gray-400 hover:bg-gray-700 disabled:opacity-50 disabled:cursor-not-allowed transition-colors duration-200",children:e.jsx(G,{className:"h-4 w-4 sm:h-5 sm:w-5"})}),e.jsx("div",{className:"flex items-center space-x-1",children:[...Array(d)].map((x,i)=>{const a=i+1;return a===1||a===d||a>=t-1&&a<=t+1?e.jsx("button",{onClick:()=>o(a),className:`px-2 py-1 text-xs sm:text-sm rounded-md transition-colors duration-200 ${t===a?"bg-blue-600 text-white":"bg-gray-800 text-gray-400 hover:bg-gray-700"}`,children:a},a):a===t-2||a===t+2?e.jsx("span",{className:"text-gray-500 text-xs sm:text-sm",children:"..."},a):null})}),e.jsx("button",{onClick:()=>o(t+1),disabled:t===d,className:"p-1 rounded-md bg-gray-800 text-gray-400 hover:bg-gray-700 disabled:opacity-50 disabled:cursor-not-allowed transition-colors duration-200",children:e.jsx(J,{className:"h-4 w-4 sm:h-5 sm:w-5"})})]}),re=()=>{const{address:t}=H(),d=U(),[o,x]=n.useState([]),[i,a]=n.useState(1),[m,p]=n.useState(1),[g,c]=n.useState(!1),[u,A]=n.useState([]),[S,f]=n.useState(!1),[h,j]=n.useState("held"),[N,w]=n.useState([]),[y,B]=n.useState(1),[k,E]=n.useState(1);n.useEffect(()=>{t&&(L(t,i),P(),$(t,y))},[t,i,y]);const L=async(s,l)=>{c(!0);try{const r=await V(s,l);x(r.transactions),p(r.totalPages)}catch(r){console.error("Error fetching transactions:",r),x([])}finally{c(!1)}},P=async()=>{if(t)try{const s=await X(t);A(s)}catch(s){console.error("Error fetching token addresses:",s)}},$=async(s,l)=>{c(!0);try{const r=await _(s,l);w(r.tokens),E(r.totalPages)}catch(r){console.error("Error fetching created tokens:",r),w([])}finally{c(!1)}},D=s=>{a(s)},R=s=>{const l=u.find(r=>r.address.toLowerCase()===s.toLowerCase());return l?l.symbol:"Unknown"},T=s=>{f(!0),d(`/token/${s}`),f(!1)},F=s=>{B(s)},v=({title:s,isActive:l,onClick:r})=>e.jsx("button",{className:`w-full rounded-lg py-2.5 text-xs sm:text-sm font-medium leading-5 ${l?"bg-white text-blue-700 shadow":"text-blue-100 hover:bg-white/[0.12] hover:text-white"}`,onClick:r,children:s});return e.jsxs(Y,{children:[e.jsx(O,{title:"Your Token Dashboard - BondX",description:"Manage your tokens and track your transactions in one place. Your personal BondX dashboard.",image:"seo/dash.jpg"}),e.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:[e.jsx("h1",{className:"text-xl sm:text-2xl font-bold text-blue-400 mb-6 neon-text",children:"Your Dashboard"}),e.jsxs("div",{className:"mb-8",children:[e.jsxs("div",{className:"flex justify-center mb-4 space-x-1 bg-blue-900/20 rounded-lg p-1",children:[e.jsx(v,{title:"Tokens Held",isActive:h==="held",onClick:()=>j("held")}),e.jsx(v,{title:"Tokens Created",isActive:h==="created",onClick:()=>j("created")})]}),h==="held"&&e.jsx("div",{children:u.length>0?e.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-4",children:u.map(s=>e.jsx(K,{tokenAddress:s.address,symbol:s.symbol,userAddress:t||"",onClick:()=>T(s.address)},s.address))}):e.jsx("p",{className:"text-gray-300 text-center text-sm sm:text-base",children:"Don't own any tokens yet"})}),h==="created"&&e.jsxs("div",{children:[g?e.jsx("p",{className:"text-gray-300 text-center",children:"Loading created tokens..."}):N.length>0?e.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-4",children:N.map(s=>e.jsxs("div",{className:"bg-gray-800 rounded-lg p-3 sm:p-4 cursor-pointer hover:bg-gray-700 transition-colors duration-200 shadow-md flex items-start",onClick:()=>T(s.address),children:[s.logo&&e.jsx("img",{src:s.logo,alt:`${s.name} logo`,className:"w-16 h-16 mr-3 sm:mr-4 rounded-full"}),e.jsxs("div",{children:[e.jsxs("h3",{className:"text-xs sm:text-sm font-semibold text-blue-400 mb-1",children:[s.name," ",e.jsxs("span",{className:"text-gray-400",children:["(",s.symbol,")"]})]}),e.jsx("p",{className:"text-gray-400 text-[9px] sm:text-xs",children:s.description})]})]},s.address))}):e.jsx("p",{className:"text-gray-300 text-center text-sm sm:text-base",children:"No tokens created yet"}),k>1&&e.jsx(C,{currentPage:y,totalPages:k,onPageChange:F})]})]}),e.jsxs("div",{children:[e.jsx("h2",{className:"text-lg sm:text-xl font-semibold text-blue-400 mb-4",children:"Recent Transactions"}),g?e.jsx("p",{className:"text-gray-300",children:"Loading transactions..."}):o&&o.length>0?e.jsx("div",{className:"overflow-x-auto bg-gray-800 rounded-lg shadow-md",children:e.jsxs("table",{className:"min-w-full divide-y divide-gray-700",children:[e.jsx("thead",{className:"bg-gray-900",children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-4 py-3 text-left text-[10px] sm:text-xs font-medium text-gray-300 uppercase tracking-wider",children:"Type"}),e.jsx("th",{className:"px-4 py-3 text-left text-[10px] sm:text-xs font-medium text-gray-300 uppercase tracking-wider",children:"Token"}),e.jsx("th",{className:"px-4 py-3 text-left text-[10px] sm:text-xs font-medium text-gray-300 uppercase tracking-wider",children:"Amount"}),e.jsx("th",{className:"px-4 py-3 text-left text-[10px] sm:text-xs font-medium text-gray-300 uppercase tracking-wider",children:"ETH"}),e.jsx("th",{className:"px-4 py-3 text-left text-[10px] sm:text-xs font-medium text-gray-300 uppercase tracking-wider",children:"Date"})]})}),e.jsx("tbody",{className:"bg-gray-800 divide-y divide-gray-700",children:o.map(s=>e.jsxs("tr",{className:"hover:bg-gray-700 transition-colors duration-150",children:[e.jsx("td",{className:"px-4 py-3 whitespace-nowrap text-[10px] sm:text-xs text-gray-300",children:s.type}),e.jsx("td",{className:"px-4 py-3 whitespace-nowrap text-[10px] sm:text-xs text-gray-300",children:R(s.recipientAddress)}),e.jsx("td",{className:"px-4 py-3 whitespace-nowrap text-[10px] sm:text-xs text-gray-300",children:b(s.tokenAmount)}),e.jsxs("td",{className:"px-4 py-3 whitespace-nowrap text-[10px] sm:text-xs text-gray-300",children:[b(s.ethAmount)," ETH"]}),e.jsx("td",{className:"px-4 py-3 whitespace-nowrap text-[10px] sm:text-xs text-gray-300",children:z(s.blockTimestamp||s.updatedAt)})]},s.id))})]})}):e.jsx("p",{className:"text-gray-300 bg-gray-800 rounded-lg p-4 shadow-md",children:"No recent transactions."}),m>1&&e.jsx(C,{currentPage:i,totalPages:m,onPageChange:D})]})]}),S&&e.jsx("div",{className:"fixed inset-0 flex items-center justify-center bg-black bg-opacity-50 z-50",children:e.jsx(q,{size:"large"})})]})};export{re as default};
