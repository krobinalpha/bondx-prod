import{j as r}from"./web3-vendor-7W8dWh3w.js";import{r as c,L as _,u as L}from"./react-vendor-BTPJ9MfQ.js";import{c as q,h as z,S}from"./Layout-Bsyg4zat.js";import{f as T}from"./api-Y8mGTqrB.js";import{c as $}from"./index-CpGdr-az.js";import{G as P,T as B,M as F,Y as D,F as A,a as M}from"./youtube-BDTeBytY.js";/**
 * @license lucide-react v0.407.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const G=q("Clock",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["polyline",{points:"12 6 12 12 16 14",key:"68esgv"}]]),I=e=>{if(!e)return!1;const s=[".mp4",".mov",".webm",".ogg",".avi"],o=e.toLowerCase();return s.some(l=>o.includes(l))||o.includes("/video/")||o.includes("resource_type=video")},R=({token:e,isEnded:s,onTokenClick:o,onLiquidityUpdate:l})=>{var n,N;const[b,u]=c.useState("0"),[p,v]=c.useState(!1);if(!(e!=null&&e.address))return console.error("TokenCard: token.address is missing",e),r.jsx("div",{className:"bg-[var(--card)] rounded-lg p-4 border border-yellow-500/50",children:r.jsx("p",{className:"text-yellow-400 text-sm",children:"Invalid token data"})});if(typeof e.address!="string"||!e.address.startsWith("0x")||e.address.length!==42)return console.error("TokenCard: invalid token address format",e.address),r.jsx("div",{className:"bg-[var(--card)] rounded-lg p-4 border border-yellow-500/50",children:r.jsx("p",{className:"text-yellow-400 text-sm",children:"Invalid token address"})});const g=e.address,f=!((n=e._count)!=null&&n.liquidityEvents),m=e.chainId;c.useEffect(()=>{if(e.graduationProgress&&e.graduationProgress!=="0"&&e.graduationProgress!==void 0){u(e.graduationProgress),l&&l(BigInt(e.graduationProgress));return}if(!f||!g||!m||p)return;(async()=>{v(!0);try{const i=await T(g,m);u(i.graduationProgress),l&&l(BigInt(i.graduationProgress))}catch(i){console.error("Error fetching graduation progress:",i)}finally{v(!1)}})()},[f,g,m,e.graduationProgress]);const x=t=>{var i;try{if(((i=e._count)==null?void 0:i.liquidityEvents)>0)return 100;if(!t||t==="0")return 0;const E=Number(t)/1e18*100;return Math.min(Math.max(E,0),100)}catch(C){return console.error("Error calculating progress:",C),0}},w=x(b),y=((N=e._count)==null?void 0:N.liquidityEvents)>0,j=b,h=e.chainId?$[e.chainId]:null,a=()=>r.jsxs("div",{className:"flex items-center gap-2 absolute top-3 right-3",onClick:t=>t.stopPropagation(),children:[e.website&&r.jsx("a",{href:e.website,target:"_blank",rel:"noopener noreferrer",className:"p-1.5 rounded-lg text-[var(--text-secondary)] hover:text-[var(--primary)] hover:bg-[var(--card-hover)] border border-transparent hover:border-[var(--primary)] transition-all duration-300",children:r.jsx(P,{size:14})}),e.twitter&&r.jsx("a",{href:e.twitter,target:"_blank",rel:"noopener noreferrer",className:"p-1.5 rounded-lg text-[var(--text-secondary)] hover:text-[var(--primary)] hover:bg-[var(--card-hover)] border border-transparent hover:border-[var(--primary)] transition-all duration-300",onClick:t=>t.stopPropagation(),children:r.jsx(B,{size:14})}),e.telegram&&r.jsx("a",{href:e.telegram,target:"_blank",rel:"noopener noreferrer",className:"p-1.5 rounded-lg text-[var(--text-secondary)] hover:text-[var(--primary)] hover:bg-[var(--card-hover)] border border-transparent hover:border-[var(--primary)] transition-all duration-300",onClick:t=>t.stopPropagation(),children:r.jsx(S,{size:14})}),e.discord&&r.jsx("a",{href:e.discord,target:"_blank",rel:"noopener noreferrer",className:"p-1.5 rounded-lg text-[var(--text-secondary)] hover:text-[var(--primary)] hover:bg-[var(--card-hover)] border border-transparent hover:border-[var(--primary)] transition-all duration-300",onClick:t=>t.stopPropagation(),children:r.jsx(F,{size:14})}),e.youtube&&r.jsx("a",{href:e.youtube,target:"_blank",rel:"noopener noreferrer",className:"p-1.5 rounded-lg text-[var(--text-secondary)] hover:text-[var(--primary)] hover:bg-[var(--card-hover)] border border-transparent hover:border-[var(--primary)] transition-all duration-300",onClick:t=>t.stopPropagation(),children:r.jsx(D,{size:14})})]}),d=()=>{o(e.address,e.chainId)};if(s&&"liquidityEvents"in e&&e.liquidityEvents.length>0){const t=`https://app.uniswap.org/swap?outputCurrency=${e.address}&chain=mainnet`;return r.jsx("div",{onClick:d,className:"cursor-pointer group",children:r.jsxs("div",{className:"card relative overflow-hidden border-[var(--card-boarder)] hover:border-[var(--primary)]",children:[r.jsx("div",{className:"absolute top-0 left-0 right-0 h-0.5 bg-gradient-to-r from-transparent via-[var(--primary)] to-transparent opacity-0 group-hover:opacity-100 transition-opacity duration-300"}),h&&r.jsx("div",{className:"absolute top-3 left-3 p-1.5 rounded-lg bg-[var(--card2)]/80 backdrop-blur-sm border border-[var(--card-boarder)] z-10",onClick:i=>i.stopPropagation(),children:r.jsx(h,{size:18,className:"rounded-full",variant:"branded"})}),r.jsxs("div",{className:"p-4 md:p-5",children:[r.jsxs("div",{className:"flex gap-3 md:gap-4 mb-4",children:[r.jsx("div",{className:"w-16 h-16 md:w-20 md:h-20 flex-shrink-0 rounded-lg overflow-hidden border border-[var(--card-boarder)] group-hover:border-[var(--primary)] transition-all duration-300",children:I(e.logo)?r.jsx("video",{src:e.logo,className:"w-full h-full object-cover",muted:!0,loop:!0,playsInline:!0,autoPlay:!0}):r.jsx("img",{src:e.logo||"/chats/noimg.svg",alt:e.name,className:"w-full h-full object-cover"})}),r.jsxs("div",{className:"flex-grow min-w-0",children:[r.jsxs("h3",{className:"text-base md:text-lg font-bold text-white mb-1 truncate",children:[e.name," ",r.jsx("span",{className:"text-[var(--text-secondary)] font-normal",children:e.symbol})]}),r.jsx("p",{className:"text-xs md:text-sm text-[var(--text-secondary)] line-clamp-2",children:e.description})]})]}),r.jsxs("div",{className:"space-y-3 mb-4",children:[r.jsxs("div",{className:"flex justify-between text-xs md:text-sm mb-1",children:[r.jsx("span",{className:"text-[var(--text-secondary)]",children:"Progress to DEX"}),r.jsx("span",{className:"gradient-text-cyan font-semibold",children:"Completed"})]}),r.jsx("div",{className:"w-full bg-[var(--card-boarder)] rounded-full h-2 overflow-hidden",children:r.jsx("div",{className:"h-2 rounded-full transition-all duration-500 w-full bg-gradient-to-r from-[var(--primary)] to-[var(--accent-purple)] shadow-[0_0_10px_rgba(0,243,255,0.5)]"})})]}),r.jsxs("div",{className:"flex gap-2",children:[r.jsx("a",{href:t,target:"_blank",rel:"noopener noreferrer",className:"flex-1 text-center py-2.5 text-xs md:text-sm font-semibold btn-primary",onClick:i=>i.stopPropagation(),children:"Trade"}),r.jsx(_,{to:`/token/${e.chainId||1}/${e.address}`,className:"flex-1 text-center py-2.5 text-xs md:text-sm font-semibold btn-secondary",children:"View"})]})]})]})})}return r.jsx("div",{onClick:d,className:"cursor-pointer group",children:r.jsxs("div",{className:"card relative overflow-hidden border-[var(--card-boarder)] hover:border-[var(--primary)]",children:[r.jsx("div",{className:"absolute top-0 left-0 right-0 h-0.5 bg-gradient-to-r from-transparent via-[var(--primary)] to-transparent opacity-0 group-hover:opacity-100 transition-opacity duration-300"}),h&&r.jsx("div",{className:"absolute top-3 left-3 p-1.5 rounded-lg bg-[var(--card2)]/80 backdrop-blur-sm border border-[var(--card-boarder)] z-10",onClick:t=>t.stopPropagation(),children:r.jsx(h,{size:18,className:"rounded-full",variant:"branded"})}),r.jsx(a,{}),r.jsxs("div",{className:"p-4 md:p-5",children:[r.jsxs("div",{className:"flex gap-3 md:gap-4 mb-4",children:[r.jsx("div",{className:"w-16 h-16 md:w-20 md:h-20 flex-shrink-0 rounded-lg overflow-hidden border border-[var(--card-boarder)] group-hover:border-[var(--primary)] transition-all duration-300",children:I(e.logo)?r.jsx("video",{src:e.logo,className:"w-full h-full object-cover",muted:!0,loop:!0,playsInline:!0,autoPlay:!0}):r.jsx("img",{src:e.logo||"/chats/noimg.svg",alt:e.name,className:"w-full h-full object-cover"})}),r.jsxs("div",{className:"flex-grow min-w-0",children:[r.jsxs("h3",{className:"text-base md:text-lg font-bold text-white mb-1 truncate",children:[e.name," ",r.jsx("span",{className:"text-[var(--text-secondary)] font-normal",children:e.symbol})]}),r.jsx("p",{className:"text-xs md:text-sm text-[var(--text-secondary)] line-clamp-2",children:e.description})]})]}),r.jsxs("div",{className:"space-y-3",children:[r.jsxs("div",{className:"flex items-center text-xs md:text-sm text-[var(--text-secondary)]",children:[r.jsx(G,{size:14,className:"mr-2 text-[var(--primary)]"}),r.jsx("span",{children:z(e.createdAt)})]}),r.jsxs("div",{className:"space-y-2",children:[r.jsxs("div",{className:"flex justify-between text-xs md:text-sm mb-1",children:[r.jsx("span",{className:"text-[var(--text-secondary)]",children:"Progress to DEX"}),r.jsx("span",{className:`font-semibold ${y?"gradient-text-cyan":"text-white"}`,children:y?"Completed":j?`${x(j.toString()).toFixed(2)}%`:"0%"})]}),r.jsx("div",{className:"w-full bg-[var(--card-boarder)] rounded-full h-2 overflow-hidden",children:r.jsx("div",{className:"h-2 rounded-full transition-all duration-500 bg-gradient-to-r from-[var(--primary)] to-[var(--accent-purple)] shadow-[0_0_10px_rgba(0,243,255,0.5)]",style:{width:`${w}%`}})})]})]})]})]})})},V=({size:e="medium",color:s="var(--primary)"})=>{const o={small:"w-32 h-1",medium:"w-48 h-1.5",large:"w-64 h-2"};return r.jsxs("div",{className:"flex flex-col items-center justify-center gap-2",children:[r.jsx("div",{className:`${o[e]} bg-[var(--card-boarder)] rounded-full overflow-hidden`,children:r.jsx("div",{className:"h-full rounded-full animate-loading-bar",style:{backgroundColor:s,width:"30%"}})}),r.jsx("span",{className:"text-gray-400 text-xs",children:"Loading..."})]})};class X extends c.Component{constructor(s){super(s),this.state={hasError:!1,error:null,errorInfo:null}}static getDerivedStateFromError(s){return{hasError:!0,error:s,errorInfo:null}}componentDidCatch(s,o){console.error("ErrorBoundary caught an error:",s,o),this.setState({error:s,errorInfo:o})}render(){var s,o;return this.state.hasError?this.props.fallback?this.props.fallback:r.jsxs("div",{className:"bg-red-900/20 border border-red-500 rounded-lg p-4 m-4",children:[r.jsx("h2",{className:"text-red-400 font-bold mb-2",children:"Something went wrong"}),r.jsxs("details",{className:"text-red-300 text-sm",children:[r.jsx("summary",{className:"cursor-pointer mb-2",children:"Error details"}),r.jsxs("pre",{className:"whitespace-pre-wrap text-xs mt-2",children:[(s=this.state.error)==null?void 0:s.toString(),(o=this.state.errorInfo)==null?void 0:o.componentStack]})]})]}):this.props.children}}const Q=({tokens:e,currentPage:s,totalPages:o,onPageChange:l,isEnded:b,sortType:u,itemsPerPage:p,isFullList:v})=>{const g=L(),[f,m]=c.useState(!1),[x,w]=c.useState({}),y=(a,d)=>{m(!0),g(`/token/${d||1}/${a}`),m(!1)},j=(a,d)=>{w(n=>({...n,[a]:d}))},h=c.useMemo(()=>{let a=[...e];if(u==="marketcap"&&a.sort((d,n)=>{const N=x[d.address]||BigInt(0);return(x[n.address]||BigInt(0))>N?1:-1}),v){const d=(s-1)*p,n=d+p;return a.slice(d,n)}return a},[e,u,x,s,p,v]);return r.jsxs(r.Fragment,{children:[r.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4 max-w-7xl mx-auto",children:h.map(a=>r.jsx(X,{fallback:r.jsx("div",{className:"bg-[var(--card)] rounded-lg p-4 border border-red-500/50",children:r.jsxs("p",{className:"text-red-400 text-sm",children:["Error loading token: ",a.name||a.address]})}),children:r.jsx(R,{token:a,isEnded:b,onTokenClick:y,onLiquidityUpdate:d=>j(a.address,d)})},a.id))}),f&&r.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:r.jsx(V,{size:"large"})}),o>1&&r.jsxs("div",{className:"flex justify-center items-center space-x-2 mt-8",children:[r.jsx("button",{onClick:()=>l(s-1),disabled:s===1,className:"p-2 rounded-md bg-[var(--card)] text-gray-400 hover:bg-[var(--card-hover)] disabled:opacity-50 disabled:cursor-not-allowed",children:r.jsx(A,{className:"h-5 w-5"})}),r.jsx("div",{className:"flex items-center space-x-1",children:Array.from({length:o},(a,d)=>d+1).map(a=>r.jsx("button",{onClick:()=>l(a),className:`px-3 py-1 rounded-md text-sm transition-colors duration-200 ${s===a?"bg-[var(--primary)] text-black":"bg-[var(--card)] text-gray-400 hover:bg-[var(--card-hover)]"}`,children:a},a))}),r.jsx("button",{onClick:()=>l(s+1),disabled:s===o,className:"p-2 rounded-md bg-[var(--card)] text-gray-400 hover:bg-[var(--card-hover)] disabled:opacity-50 disabled:cursor-not-allowed",children:r.jsx(M,{className:"h-5 w-5"})})]})]})};export{V as L,Q as T};
